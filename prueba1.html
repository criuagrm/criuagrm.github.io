<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Análisis: Oxford Handbook of Environmental Political Theory</title>
<script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

<style>
  :root {
    --bg-app: #f4f1ea; /* Crema papel antiguo */
    --sidebar-bg: #ffffff;
    --text-primary: #2b3a42; /* Gris oscuro/azulado */
    --accent-color: #556b2f; /* Verde oliva oscuro */
    --highlight-color: #8fbc8f; /* Verde salvia */
    --border-color: #dcd6cc;
    --font-heading: 'Playfair Display', serif;
    --font-body: 'Lato', sans-serif;
  }

  body {
    font-family: var(--font-body);
    margin: 0; padding: 0;
    height: 100vh;
    display: flex;
    background-color: var(--bg-app);
    color: var(--text-primary);
    overflow: hidden;
  }

  /* --- BARRA LATERAL (INFO) --- */
  .sidebar {
    width: 450px;
    background: var(--sidebar-bg);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    box-shadow: 2px 0 20px rgba(0,0,0,0.05);
    z-index: 20;
    position: relative;
    height: 100vh;
    transition: margin-left 0.4s ease;
  }

  .sidebar.closed {
    margin-left: -450px;
  }

  .header {
    padding: 30px 25px;
    background: #2e4053; /* Azul pizarra oscuro */
    color: #f4f1ea;
    border-bottom: 6px solid var(--accent-color);
    background-image: linear-gradient(to bottom right, #2e4053, #1a252f);
  }

  .header h1 {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    margin: 0 0 10px 0;
    line-height: 1.2;
    letter-spacing: 0.5px;
  }

  .header .meta {
    font-size: 0.8rem;
    color: #bdc3c7;
    font-style: italic;
    opacity: 0.9;
  }

  .filters {
    padding: 15px 20px;
    background: #e8e6e1;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    gap: 10px;
    overflow-x: auto;
  }

  .filter-btn {
    background: transparent;
    border: 1px solid #999;
    padding: 5px 12px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.75rem;
    font-weight: 700;
    color: #555;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .filter-btn:hover, .filter-btn.active {
    background: var(--accent-color);
    color: white;
    border-color: var(--accent-color);
  }

  .content-area {
    flex-grow: 1;
    overflow-y: auto;
    padding: 30px;
    background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIi8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiNmM2YzZjMiLz4KPC9zdmc+');
  }

  .node-type {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--accent-color);
    margin-bottom: 5px;
    font-weight: bold;
  }

  .info-title {
    font-family: var(--font-heading);
    font-size: 1.8rem;
    color: #2c3e50;
    margin-top: 0;
    margin-bottom: 15px;
    line-height: 1.2;
    border-bottom: 1px solid #ddd;
    padding-bottom: 10px;
  }

  .info-body {
    font-size: 1rem;
    line-height: 1.7;
    color: #444;
    margin-bottom: 25px;
    text-align: justify;
  }

  /* Citas académicas */
  .citation-block {
    background: #fdf6e3; /* Tono solarizado claro */
    border-left: 4px solid #b58900;
    padding: 15px;
    margin: 20px 0;
    font-family: var(--font-heading);
    font-style: italic;
    color: #5d5d5d;
    position: relative;
  }
  
  .citation-block::before {
    content: "“";
    font-size: 3rem;
    color: #eaddc5;
    position: absolute;
    top: -10px;
    left: 5px;
    z-index: 0;
  }
  
  .citation-content { position: relative; z-index: 1; }

  .source-tag {
    display: block;
    text-align: right;
    font-size: 0.75rem;
    font-family: var(--font-body);
    font-style: normal;
    color: #999;
    margin-top: 5px;
  }

  .key-concept-box {
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 15px;
    margin-top: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.03);
  }
  
  .key-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    color: #888;
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
  }

  .footer {
    padding: 15px;
    background: #f4f1ea;
    font-size: 0.7rem;
    text-align: center;
    color: #888;
    border-top: 1px solid #ddd;
  }

  /* --- RED / CANVAS --- */
  #network-wrapper {
    flex-grow: 1;
    position: relative;
    height: 100vh;
    background: #f4f1ea; 
  }

  #network { width: 100%; height: 100%; }

  /* Botones flotantes */
  .toggle-btn {
    position: absolute;
    top: 20px; left: 20px;
    background: #fff;
    border: 1px solid #ccc;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    font-family: var(--font-body);
    font-size: 0.9rem;
    z-index: 100;
  }

  .legend {
    position: absolute;
    bottom: 20px; right: 20px;
    background: rgba(255,255,255,0.9);
    padding: 10px;
    border-radius: 4px;
    border: 1px solid #ddd;
    font-size: 0.75rem;
    display: flex;
    flex-direction: column;
    gap: 5px;
  }
  .legend-item { display: flex; align-items: center; gap: 6px; }
  .dot { width: 10px; height: 10px; border-radius: 50%; }

</style>
</head>
<body>

<div class="sidebar" id="sidebar">
  <div class="header">
    <h1>The Oxford Handbook of Environmental Political Theory</h1>
    <div class="meta">Gabrielson, Hall, Meyer & Schlosberg (Eds.)</div>
  </div>

  <div class="filters">
    <button class="filter-btn active" onclick="filterNetwork('all')">Todo</button>
    <button class="filter-btn" onclick="filterNetwork('traditions')">Tradiciones</button>
    <button class="filter-btn" onclick="filterNetwork('nature')">Naturaleza</button>
    <button class="filter-btn" onclick="filterNetwork('ideals')">Ideales</button>
    <button class="filter-btn" onclick="filterNetwork('power')">Poder</button>
  </div>

  <div class="content-area" id="infoPanel">
    <div style="text-align: center; color: #888; margin-top: 40%;">
      <h3 style="font-family: var(--font-heading); color: var(--accent-color);">Explorador de Teoría Política Ambiental</h3>
      <p>Selecciona un nodo para explorar los argumentos clave, citas textuales y conexiones conceptuales del manual.</p>
      <small>Basado en el análisis del texto original (2016)</small>
    </div>
  </div>

  <div class="footer">
    Visualización generada a partir de documentos subidos.
  </div>
</div>

<div id="network-wrapper">
  <button class="toggle-btn" onclick="toggleSidebar()">☰ Menú</button>
  <div id="network"></div>
  
  <div class="legend">
    <div class="legend-item"><div class="dot" style="background:#d35400"></div> Tradiciones Políticas</div>
    <div class="legend-item"><div class="dot" style="background:#27ae60"></div> Naturaleza y Sujeto</div>
    <div class="legend-item"><div class="dot" style="background:#2980b9"></div> Ideales (Justicia/Sostenibilidad)</div>
    <div class="legend-item"><div class="dot" style="background:#8e44ad"></div> Poder y Cambio</div>
  </div>
</div>

<script>
// --- DATOS DEL MANUAL (Extraídos del PDF) ---
const bookData = {
  // NODO CENTRAL
  0: {
    type: "Volumen Central",
    title: "Handbook of Environmental Political Theory",
    text: "La Teoría Política Ambiental (EPT) se define no como una posición ideológica rígida, sino como un campo de investigación amplio que utiliza herramientas teóricas (crítica conceptual, análisis normativo) para abordar desafíos ecológicos contemporáneos. No es simplemente 'aplicar' teoría política al medio ambiente, sino repensar los conceptos políticos fundamentales (justicia, democracia, libertad) desde una perspectiva ecológica.",
    [cite_start]quote: "La EPT interroga los conceptos políticos tradicionales desde un punto de vista ambiental... reflexionando sobre democracia, libertad, derechos y justicia[cite: 264].",
    concept: "Interdisciplinariedad y Normativa"
  },

  // --- TRADICIONES (PARTE I & II) ---
  1: {
    type: "Parte II: Tradiciones",
    title: "Diálogo con la Tradición Occidental",
    text: "El manual examina cómo la EPT se apropia y critica el canon occidental. Los textos clásicos de Platón, Hobbes o Locke no se leen como autoridades absolutas, sino como recursos para diagnosticar crisis actuales. Harlan Wilson argumenta que este uso es a menudo 'selectivo e instrumental'.",
    [cite_start]quote: "El tratamiento de los textos clásicos por parte de la EPT tiende a ser tanto selectivo como instrumental... buscando diagnosticar y criticar el presente[cite: 274].",
    concept: "Apropiación Crítica"
  },
  11: {
    type: "Capítulo 4",
    title: "Liberalismo Ambiental",
    text: "Piers Stephens explora si el liberalismo es compatible con el ecologismo. Aunque el liberalismo clásico (Locke) se asocia con la propiedad y la explotación, Stephens rescata el 'nuevo liberalismo' de John Stuart Mill. Mill es visto como un precursor clave por su defensa del 'estado estacionario' y la valoración del carácter humano a través del contacto con la naturaleza.",
    [cite_start]quote: "El nuevo liberalismo milliano... es la variante mejor adaptada para una síntesis con los objetivos y valores ambientalistas[cite: 626].",
    concept: "Liberalismo Verde / Estado Estacionario"
  },
  12: {
    type: "Capítulo 3",
    title: "Enfoques No-Occidentales",
    text: "Farah Godrej critica la tendencia 'civilizacional' que esencializa a Oriente como inherentemente ecológico frente a un Occidente destructor. Propone un enfoque 'Neo-Gandhiano': práctico, materialista y político, enfocado en la autosuficiencia (swaraj) y la justicia diaria, en lugar de una reverencia mística abstracta por la naturaleza.",
    [cite_start]quote: "Un enfoque Neo-Gandhiano... combina la atención a la ética con una crítica explícitamente política y atención a las formas sistémicas de injusticia[cite: 496].",
    concept: "Neo-Gandhismo / Swaraj"
  },

  // --- NATURALEZA Y SUJETOS (PARTE III) ---
  2: {
    type: "Parte III: Ontología",
    title: "Repensando la Naturaleza",
    text: "Esta sección desafía el dualismo humano/naturaleza. Se mueve hacia el 'Nuevo Materialismo' y la teoría del Actor-Red, argumentando que el entorno no es un fondo pasivo, sino una fuerza activa que nos constituye.",
    [cite_start]quote: "El entorno entra dentro... no simplemente como contexto, sino componiendo y descomponiendo literalmente nuestros cuerpos[cite: 181].",
    concept: "Trans-corporealidad"
  },
  21: {
    type: "Capítulo 41",
    title: "Democracia Ecológica y Cosas",
    text: "Lisa Disch utiliza la Teoría del Actor-Red (Latour) para criticar la idea de que la naturaleza necesita 'representantes humanos' porque es muda. Argumenta que los objetos y 'cosas' (como un incinerador o microbios) son participantes activos (actantes) que configuran la política y crean controversias públicas.",
    [cite_start]quote: "Cambiar el enfoque de la responsabilidad de los humanos de representar a la naturaleza, a la agencia de las cosas en la representación de los humanos[cite: 626].",
    concept: "Agencia Material / Actantes"
  },
  22: {
    type: "Capítulo 24",
    title: "El Meme del Antropoceno",
    text: "Giovanna Di Chiro analiza críticamente el término 'Antropoceno'. Aunque pretende unificar, a menudo oculta desigualdades bajo un 'nosotros' universal. Señala que muchos movimientos de justicia ambiental rechazan el término por ser tecnocrático y apocalíptico, prefiriendo narrativas de resistencia y 'cuidado del territorio' (country).",
    [cite_start]quote: "El 'Antropoceno' a menudo funciona como un dispositivo narrativo que... universaliza la agencia humana ocultando las desigualdades del poder[cite: 364].",
    concept: "Crítica al Antropoceno / Justicia Climática"
  },
  23: {
    type: "Capítulo 15",
    title: "Biopolítica Vegetal",
    text: "Catriona Sandilands explora cómo las plantas no son objetos pasivos sino seres con capacidades sensoriales. La EPT debe considerar una 'biopolítica' que incluya la agencia vegetal y cómo las relaciones humano-planta estructuran nuestras comunidades.",
    [cite_start]quote: "Desafiar la ceguera hacia las plantas (plant blindness) y reconocer sus capacidades distintivas y su participación en la vida política[cite: 228].",
    concept: "Agencia Vegetal"
  },

  // --- IDEALES (PARTE IV) ---
  3: {
    type: "Parte IV: Fines",
    title: "Sostenibilidad y Justicia",
    text: "Se analizan los objetivos normativos. La sostenibilidad no es solo técnica, es política. La justicia se expande más allá de la distribución para incluir el reconocimiento y las capacidades (Schlosberg).",
    [cite_start]quote: "La sostenibilidad implica gestionar la tasa y escala del cambio... conservando valores y relaciones centrales[cite: 16].",
    concept: "Justicia Trivalente"
  },
  31: {
    type: "Capítulo 21",
    title: "Justicia Ambiental y Climática",
    text: "Steve Vanderheiden examina cómo el cambio climático exacerba las injusticias existentes. Utiliza el marco de la Convención Marco de las Naciones Unidas (UNFCCC) para discutir principios como 'quien contamina paga' y la equidad intergeneracional.",
    [cite_start]quote: "El cambio climático se espera que concentre muchos de los peores daños en las personas y pueblos más vulnerables del mundo[cite: 322].",
    concept: "Equidad Global"
  },
  32: {
    type: "Capítulo 19",
    title: "¿Límites a los Límites?",
    text: "Andrew Dobson revisita el debate de 'Los Límites del Crecimiento' (1972). Argumenta contra la 'modernización ecológica' que promete crecimiento infinito, sugiriendo que el reconocimiento de límites finitos es esencial para una política realista y justa.",
    [cite_start]quote: "El crecimiento infinito en un sistema finito es una aspiración imposible... debates sobre decrecimiento y post-crecimiento[cite: 290].",
    concept: "Límites del Crecimiento"
  },

  // --- PODER (PARTE V) ---
  4: {
    type: "Parte V: Estructuras",
    title: "Poder y Cambio",
    text: "Examina cómo las estructuras políticas (Estados, capitalismo, movimientos) restringen o habilitan la acción ambiental. Incluye análisis del 'Estado Verde' y la 'Gubernamentalidad'.",
    [cite_start]quote: "La EPT no solo pregunta qué debemos hacer... sino cómo las prescripciones normativas se refractan a través de sistemas de poder[cite: 181].",
    concept: "Poder Estructural"
  },
  41: {
    type: "Capítulo 30",
    title: "Gubernamentalidad Ambiental",
    text: "Timothy Luke aplica a Foucault para analizar el 'eco-managerialismo'. Argumenta que gran parte de la política ambiental moderna es una forma de disciplinar a las poblaciones y gestionar recursos para sostener el capitalismo, en lugar de proteger la naturaleza per se.",
    [cite_start]quote: "Las capacidades de la gubernamentalidad verde llevan el alcance administrativo... más profundo, más rápido y más fuerte hacia el eco-managerialismo[cite: 471].",
    concept: "Eco-Managerialismo"
  },
  42: {
    type: "Capítulo 36",
    title: "Ambientalismo de los Pobres",
    text: "Joan Martinez-Alier contrasta el ambientalismo del Norte (preservacionista) con el 'ecologismo de los pobres' del Sur Global. Este último surge de conflictos distributivos sobre recursos necesarios para la subsistencia, no por estética.",
    [cite_start]quote: "Conflictos sobre el uso del medio ambiente y quién debería beneficiarse de él... vinculando demandas ambientales con justicia social[cite: 507].",
    concept: "Ecologismo Popular"
  },
  43: {
    type: "Capítulo 37",
    title: "Movimientos Indígenas",
    text: "Kyle Whyte analiza cómo las instituciones deben funcionar como 'convocantes de responsabilidades' (conveners). Basado en la cosmología Anishinaabe, el agua y otros entes son parientes con responsabilidades mutuas, no recursos.",
    [cite_start]quote: "Las instituciones deben funcionar para convocar parientes y responsabilidades... basadas en la riqueza de los sistemas culturales[cite: 571].",
    concept: "Instituciones como Convocantes"
  }
};

// --- NODOS Y ARISTAS VIS.JS ---
const nodesArray = [
  { id: 0, label: "Handbook of\nEPT", size: 40, color: "#2c3e50", font: { color: "white" }, shape: "box" },
  
  // GRUPO 1: TRADICIONES (Naranja/Terra Cotta)
  { id: 1, label: "Tradiciones\nPolíticas", group: "traditions", value: 25 },
  { id: 11, label: "Liberalismo\n(Mill)", group: "traditions", value: 15 },
  { id: 12, label: "Enfoques\nNo-Occidentales", group: "traditions", value: 15 },

  // GRUPO 2: NATURALEZA (Verde)
  { id: 2, label: "Repensando la\nNaturaleza", group: "nature", value: 25 },
  { id: 21, label: "Agencia de\nlas Cosas", group: "nature", value: 15 },
  { id: 22, label: "Crítica al\nAntropoceno", group: "nature", value: 15 },
  { id: 23, label: "Biopolítica\nVegetal", group: "nature", value: 15 },

  // GRUPO 3: IDEALES (Azul)
  { id: 3, label: "Fines e\nIdeales", group: "ideals", value: 25 },
  { id: 31, label: "Justicia\nClimática", group: "ideals", value: 15 },
  { id: 32, label: "Límites del\nCrecimiento", group: "ideals", value: 15 },

  // GRUPO 4: PODER (Morado)
  { id: 4, label: "Poder y\nCambio", group: "power", value: 25 },
  { id: 41, label: "Gubernamentalidad\n(Foucault)", group: "power", value: 15 },
  { id: 42, label: "Ambientalismo\nde los Pobres", group: "power", value: 15 },
  { id: 43, label: "Instituciones\nIndígenas", group: "power", value: 15 }
];

const edgesArray = [
  { from: 0, to: 1 }, { from: 0, to: 2 }, { from: 0, to: 3 }, { from: 0, to: 4 },
  
  { from: 1, to: 11 }, { from: 1, to: 12 },
  { from: 2, to: 21 }, { from: 2, to: 22 }, { from: 2, to: 23 },
  { from: 3, to: 31 }, { from: 3, to: 32 },
  { from: 4, to: 41 }, { from: 4, to: 42 }, { from: 4, to: 43 },

  // Conexiones transversales conceptuales
  { from: 42, to: 31, label: "vincula", dashes: true, color: { opacity: 0.4 } }, // Pobreza -> Justicia
  { from: 12, to: 42, label: "resuena con", dashes: true, color: { opacity: 0.4 } }, // Gandhi -> Amb. Pobres
  { from: 21, to: 4, label: "redefine", dashes: true, color: { opacity: 0.4 } }, // Cosas -> Política
  { from: 22, to: 31, label: "critica", dashes: true, color: { opacity: 0.4 } } // Antropoceno -> Justicia
];

// --- CONFIGURACIÓN DE VIS.JS ---
const container = document.getElementById('network');
const data = { nodes: new vis.DataSet(nodesArray), edges: new vis.DataSet(edgesArray) };

const options = {
  nodes: {
    shape: 'dot',
    font: { face: 'Lato', size: 14, color: '#333', strokeWidth: 3, strokeColor: '#fff' },
    borderWidth: 2,
    shadow: true
  },
  edges: {
    width: 2,
    color: { color: '#bdc3c7', highlight: '#556b2f' },
    smooth: { type: 'continuous', roundness: 0 }
  },
  groups: {
    traditions: { color: { background: '#d35400', border: '#a04000' } }, // Naranja tierra
    nature: { color: { background: '#27ae60', border: '#1e8449' } }, // Verde hoja
    ideals: { color: { background: '#2980b9', border: '#1f618d' } }, // Azul agua
    power: { color: { background: '#8e44ad', border: '#6c3483' } } // Morado poder
  },
  physics: {
    stabilization: false,
    barnesHut: {
      gravitationalConstant: -3000,
      centralGravity: 0.3,
      springLength: 120,
      springConstant: 0.04
    }
  },
  interaction: { hover: true, tooltipDelay: 200 }
};

const network = new vis.Network(container, data, options);

// --- LÓGICA DE INTERACCIÓN ---
network.on("click", function (params) {
  if (params.nodes.length > 0) {
    const nodeId = params.nodes[0];
    const info = bookData[nodeId];
    
    // Abrir sidebar
    const sidebar = document.getElementById('sidebar');
    if (sidebar.classList.contains('closed')) toggleSidebar();
    
    if (info) {
      document.getElementById('infoPanel').innerHTML = `
        <div class="node-type">${info.type}</div>
        <h2 class="info-title">${info.title}</h2>
        <div class="info-body">${info.text}</div>
        
        <div class="citation-block">
          <div class="citation-content">
            ${info.quote}
          </div>
        </div>

        <div class="key-concept-box">
          <span class="key-label">Concepto Clave</span>
          <span style="font-family: var(--font-heading); font-size: 1.1rem; color: var(--accent-color);">
            ${info.concept}
          </span>
        </div>
      `;
    }
  }
});

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('closed');
}

function filterNetwork(group) {
  // Resetear filtros visuales
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');

  if (group === 'all') {
    data.nodes.update(nodesArray.map(n => ({ id: n.id, hidden: false })));
  } else {
    const visibleNodes = nodesArray.filter(n => n.group === group || n.id === 0).map(n => n.id);
    const hiddenUpdates = nodesArray.map(n => ({ 
      id: n.id, 
      hidden: !visibleNodes.includes(n.id) 
    }));
    data.nodes.update(hiddenUpdates);
  }
  network.fit();
}

</script>
</body>
</html>
