<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Oxford Handbook EPT - An치lisis Extendido</title>
<script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

<style>
  :root {
    --primary: #1a3c34; /* Verde Oxford profundo */
    --secondary: #c19a6b; /* Tono papel antiguo/oro */
    --fire: #e74c3c;    /* Color para incendios */
    --text: #2c3e50;
    --bg-panel: #ffffff;
    --bg-canvas: #f4f4f2;
  }

  body, html {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    font-family: 'Lato', sans-serif;
    background-color: var(--bg-canvas);
    overflow: hidden;
  }

  /* --- UI PRINCIPAL --- */
  #network {
    width: 100%; height: 100vh;
    background: radial-gradient(circle, #fcfcfc 0%, #e8e8e8 100%);
  }

  /* Botonera de Filtros */
  .controls {
    position: absolute;
    top: 20px; left: 20px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    z-index: 100;
    max-width: 80%;
  }

  .btn {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid #ccc;
    padding: 8px 16px;
    border-radius: 30px;
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text);
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
  
  .btn.active { 
    background: var(--primary); 
    color: #fff; 
    border-color: var(--primary); 
  }

  /* Bot칩n especial FUEGO */
  .btn-fire { border-color: var(--fire); color: var(--fire); }
  .btn-fire.active { background: var(--fire); color: white; }

  /* --- PANEL LATERAL (SIDEBAR) --- */
  .sidebar {
    position: absolute;
    right: 0; top: 0;
    width: 500px; /* Panel m치s ancho para lectura c칩moda */
    height: 100vh;
    background: var(--bg-panel);
    box-shadow: -5px 0 25px rgba(0,0,0,0.1);
    transform: translateX(100%);
    transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    display: flex;
    flex-direction: column;
    z-index: 200;
  }

  .sidebar.open { transform: translateX(0); }

  /* Cabecera del Panel */
  .panel-header {
    background: var(--primary);
    color: #fff;
    padding: 30px;
    border-bottom: 5px solid var(--secondary);
  }

  .oxford-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    line-height: 1.2;
    margin-bottom: 5px;
  }

  .oxford-sub {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    opacity: 0.8;
    margin-bottom: 15px;
  }

  .meta-info {
    font-size: 0.7rem;
    color: #aeb6bf;
    border-top: 1px solid rgba(255,255,255,0.2);
    padding-top: 10px;
  }

  /* Contenido del Panel */
  .panel-content {
    flex-grow: 1;
    overflow-y: auto;
    padding: 30px;
    line-height: 1.8;
  }

  .article-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.8rem;
    color: var(--primary);
    margin-top: 0;
    border-bottom: 1px solid #eee;
    padding-bottom: 15px;
  }

  .author-tag {
    font-size: 0.85rem;
    font-weight: bold;
    color: var(--secondary);
    margin-bottom: 20px;
    display: block;
  }

  .subtitle {
    font-weight: 700;
    color: #444;
    margin-top: 25px;
    margin-bottom: 10px;
    font-size: 1.1rem;
  }

  p { margin-bottom: 15px; text-align: justify; color: #555; }

  /* Estilo de Citas */
  .quote-block {
    background: #fdfaf6;
    border-left: 4px solid var(--secondary);
    padding: 15px 20px;
    margin: 20px 0;
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: 1.05rem;
    color: #333;
  }

  .citation-ref {
    display: block;
    text-align: right;
    font-size: 0.7rem;
    font-family: 'Lato', sans-serif;
    font-style: normal;
    color: #999;
    margin-top: 5px;
  }

  /* Footer del Panel */
  .panel-footer {
    padding: 15px;
    background: #f8f9fa;
    border-top: 1px solid #eee;
    font-size: 0.7rem;
    text-align: center;
    color: #888;
  }

  /* Bot칩n cerrar m칩vil */
  .close-btn {
    position: absolute;
    top: 15px; right: 15px;
    background: none;
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
  }

  /* --- RESPONSIVE --- */
  @media (max-width: 768px) {
    .sidebar {
      width: 100%;
      height: 85vh; /* Hoja deslizante desde abajo */
      bottom: 0; top: auto;
      transform: translateY(100%);
      border-radius: 20px 20px 0 0;
    }
    .sidebar.open { transform: translateY(0); }
    .controls { top: auto; bottom: 20px; left: 10px; right: 10px; justify-content: center; }
  }
</style>
</head>
<body>

<div id="network"></div>

<div class="controls">
  <button class="btn active" onclick="filterNodes('all', this)">Vista General</button>
  <button class="btn" onclick="filterNodes('tradition', this)">Tradiciones (Historia)</button>
  <button class="btn" onclick="filterNodes('nature', this)">Naturaleza y Agencia</button>
  <button class="btn" onclick="filterNodes('power', this)">Poder y Gobierno</button>
  <button class="btn btn-fire" onclick="filterNodes('fire', this)">游댠 Fuego e Incendios</button>
</div>

<div class="sidebar" id="sidebar">
  <button class="close-btn" onclick="closeSidebar()">칑</button>
  
  <div class="panel-header">
    <div class="oxford-title">The Oxford Handbook of<br>Environmental Political Theory</div>
    <div class="oxford-sub">Oxford University Press (2016)</div>
    <div class="meta-info">Editado por Gabrielson, Hall, Meyer & Schlosberg</div>
  </div>

  <div class="panel-content" id="content-body">
    <div style="text-align: center; margin-top: 50%; color: #aaa;">
      <p>Seleccione un nodo para desplegar el an치lisis detallado.</p>
    </div>
  </div>

  <div class="panel-footer">
    Elaborado por <strong>Maria Angelica Suarez Ribera</strong>
  </div>
</div>

<script>
  // --- BASE DE DATOS DE CONTENIDO (TEXTOS COMPLETOS) ---
  const db = {
    // NODO CENTRAL
    0: {
      type: "Introducci칩n General",
      title: "El Campo de la Teor칤a Pol칤tica Ambiental (EPT)",
      author: "Editores: Gabrielson, Hall, Meyer & Schlosberg",
      content: `
        <div class="subtitle">Definiendo el Campo</div>
        <p>Este manual define la EPT no como una ideolog칤a r칤gida, sino como un campo de investigaci칩n fluido. A diferencia de la ciencia pol칤tica tradicional, que a menudo ignora el mundo no humano, la EPT utiliza herramientas como la cr칤tica conceptual y el an치lisis normativo para interrogar c칩mo los conceptos pol칤ticos cl치sicos (libertad, justicia, democracia) cambian de significado en la era de la crisis ecol칩gica.</p>
        
        <div class="subtitle">M치s all치 del "Cientificismo"</div>
        <p>Una tesis central del libro es el rechazo al "cientificismo". Aunque la EPT respeta la ciencia clim치tica, rechaza la idea de que los cient칤ficos deban ser los 칰nicos 치rbitros normativos. La pol칤tica ambiental no puede reducirse a m칠tricas t칠cnicas; requiere un debate de valores sobre qu칠 tipo de mundo queremos habitar.</p>
        
        <div class="quote-block">
          "La EPT interroga los conceptos pol칤ticos tradicionales desde un punto de vista ambiental... reflexionando sobre democracia, libertad, derechos y justicia."
          <span class="citation-ref">[Fuente: Cap. 1, Introducci칩n]</span>
        </div>
      `
    },

    // --- GRUPO: FUEGO (FIRE) ---
    // Basado en Cap칤tulo 26: Bodies, Environments, and Agency (Teena Gabrielson)
    100: {
      type: "Caso de Estudio: Agencia Material",
      title: "Incendios Forestales (Wildfire)",
      author: "Teena Gabrielson (Cap칤tulo 26)",
      content: `
        <div class="subtitle">La Vida del Fuego</div>
        <p>El fuego desaf칤a las categorizaciones pol칤ticas tradicionales. Hist칩ricamente, nuestro lenguaje le otorga una vitalidad inusual: decimos que el fuego "respira", "consume", "ruge" y "muere". Gabrielson utiliza el incendio forestal (especialmente en el oeste de EE.UU.) para ilustrar c칩mo la "agencia" (la capacidad de actuar) no es exclusiva de los humanos.</p>
        
        <div class="subtitle">De "Acto de Dios" a Gesti칩n Fallida</div>
        <p>A finales del siglo XIX, los gestores forestales redefinieron el fuego: pas칩 de ser un "acto de Dios" impredecible a un fen칩meno f칤sico que pod칤a ser controlado por la ciencia humana. Se instaur칩 la <strong>pol칤tica de supresi칩n total</strong>. Esta arrogancia humana (creer que pod칤amos eliminar la agencia del fuego) llev칩 a una paradoja desastrosa: d칠cadas de "victorias" apagando incendios acumularon combustible en los bosques, creando las condiciones para los mega-incendios incontrolables del siglo XXI.</p>

        <div class="quote-block">
          "Concebir los incendios estrictamente como procesos ecol칩gicos o f칤sicos los despolitiza... Debemos concebirlos como fen칩menos discursivo-materiales constituidos por un ensamblaje particular de actores."
          <span class="citation-ref">[Fuente: Cap. 26, p. 409]</span>
        </div>
      `
    },
    101: {
      type: "Concepto Te칩rico",
      title: "Ensamblaje de Actores",
      author: "Ref: Bruno Latour / Jane Bennett",
      content: `
        <div class="subtitle">쯈ui칠n causa el incendio?</div>
        <p>Desde la perspectiva de la EPT, un incendio no es solo una reacci칩n qu칤mica. Es un evento pol칤tico causado por un "colectivo" o ensamblaje de actores diversos. No se puede culpar solo a la chispa o al viento.</p>
        <p>Gabrielson lista los actores que "intra-act칰an" para producir el desastre: "los comisionados del condado (que aprueban casas en bosques), el viento, las cuadrillas de convictos (que limpian maleza), las primas de seguros, los modeladores de fuego, el Congreso, la pendiente de la monta침a, la lluvia, los desarrolladores inmobiliarios y el fuego mismo".</p>
        <div class="quote-block">
          "Tal contabilidad es agotadora, pero promete una mayor apreciaci칩n de los colectivos que producen acci칩n en el mundo."
          <span class="citation-ref">[Fuente: Cap. 26, p. 409]</span>
        </div>
      `
    },

    // --- GRUPO: TRADICIONES ---
    21: {
      type: "Historia de las Ideas",
      title: "Apropiaci칩n Cr칤tica del Canon",
      author: "Harlan Wilson (Cap칤tulo 2)",
      content: `
        <div class="subtitle">Leyendo a los Cl치sicos en el Antropoceno</div>
        <p>쯈u칠 pueden decirnos Plat칩n o Hobbes sobre el cambio clim치tico? Wilson argumenta que la EPT trata los textos cl치sicos de manera "selectiva e instrumental". No se leen como sagradas escrituras, sino como diagn칩sticos de por qu칠 llegamos a esta crisis.</p>
        <div class="subtitle">El Dilema de Hobbes</div>
        <p>Hobbes es central para entender la "tragedia de los comunes". Su visi칩n de humanos ego칤stas compitiendo por recursos limitados prefigura los argumentos modernos para un "autoritarismo verde": la idea de que solo un Leviat치n (un estado fuerte) puede obligarnos a no destruir el planeta.</p>
        <div class="quote-block">
          "El tratamiento de los textos cl치sicos tiende a ser tanto selectivo como instrumental... buscando diagnosticar y criticar el presente."
          <span class="citation-ref">[Fuente: Cap. 2, p. 22]</span>
        </div>
      `
    },
    23: {
      type: "Liberalismo y Medio Ambiente",
      title: "쯇uede el Liberalismo ser Verde?",
      author: "Piers Stephens (Cap칤tulo 4)",
      content: `
        <div class="subtitle">Locke vs. Mill</div>
        <p>El liberalismo cl치sico de John Locke se asocia con la propiedad privada ilimitada y la transformaci칩n de la naturaleza en capital ("subyugar la tierra"). Sin embargo, Stephens rescata a <strong>John Stuart Mill</strong> como el verdadero padre del liberalismo verde.</p>
        <div class="subtitle">El Estado Estacionario</div>
        <p>Mill fue el primer economista cl치sico en argumentar que el crecimiento infinito no era deseable. Propuso el "Estado Estacionario": una econom칤a estable donde el progreso se mide en cultura, moral y libertad, no en acumulaci칩n material. Para Mill, la naturaleza virgen es necesaria para el desarrollo del car치cter humano, ofreciendo soledad y reflexi칩n lejos de la competencia comercial.</p>
        <div class="quote-block">
          "El nuevo liberalismo milliano es la variante mejor adaptada para una s칤ntesis con los objetivos y valores ambientalistas."
          <span class="citation-ref">[Fuente: Cap. 4, p. 63]</span>
        </div>
      `
    },

    // --- GRUPO: PODER ---
    51: {
      type: "Poder y Biopol칤tica",
      title: "Gubernamentalidad Ambiental",
      author: "Timothy W. Luke (Cap칤tulo 30)",
      content: `
        <div class="subtitle">Eco-Managerialismo</div>
        <p>Aplicando a Foucault, Luke argumenta que el "medio ambiente" no es algo natural que est치 ah칤 fuera, sino un objeto de conocimiento creado por expertos para ser gestionado. La "Gubernamentalidad Verde" no busca salvar la Tierra por amor a la naturaleza, sino gestionar recursos y poblaciones para asegurar la supervivencia del estado y el mercado.</p>
        <div class="subtitle">Vigilancia del Carbono</div>
        <p>El monitoreo de la huella de carbono es la forma suprema de biopoder actual. Convierte las actividades diarias de respirar, comer y viajar en m칠tricas administrables ("conducta de la conducta"), desplazando la responsabilidad pol칤tica a la culpa individual del consumidor.</p>
        <div class="quote-block">
          "La gubernamentalidad verde lleva el alcance administrativo... m치s profundo, m치s r치pido y m치s fuerte hacia el eco-managerialismo."
          <span class="citation-ref">[Fuente: Cap. 30, p. 471]</span>
        </div>
      `
    },
    
    // --- GRUPO: NATURALEZA ---
    33: {
      type: "Ontolog칤a Pol칤tica",
      title: "Biopol칤tica Vegetal",
      author: "Catriona Sandilands (Cap칤tulo 15)",
      content: `
        <div class="subtitle">Ceguera hacia las Plantas</div>
        <p>La teor칤a pol칤tica sufre de "ceguera vegetal" (plant blindness). Vemos a las plantas como el fondo pasivo de la acci칩n humana. Sandilands desaf칤a esto citando investigaciones sobre la inteligencia y sensibilidad vegetal. Las plantas "intra-act칰an" con nosotros.</p>
        <div class="subtitle">Pol칤tica Floral</div>
        <p>Analizando c칩mo las plantas organizan nuestras ciudades (parques, monocultivos), Sandilands propone una biopol칤tica que incluya a la vida vegetal no como recurso, sino como constituyente activo de la comunidad pol칤tica.</p>
      `
    }
  };

  // --- DATOS DE LA RED (VIS.JS) ---
  const nodes = new vis.DataSet([
    { id: 0, label: "Handbook\nEPT", color: "#1a3c34", font: { color: "white", size: 20 }, size: 40, shape: "box" },
    
    // GRUPO FUEGO (Destacado)
    { id: 100, label: "FUEGO\n(Wildfire)", group: "fire", value: 25, shape: "hexagon" },
    { id: 101, label: "Ensamblaje\nde Actores", group: "fire", value: 15 },
    { id: 102, label: "Pol칤tica de\nSupresi칩n", group: "fire", value: 15 },

    // TRADICIONES
    { id: 21, label: "Historia del\nPensamiento", group: "tradition", value: 20 },
    { id: 23, label: "Liberalismo\n(Mill vs Locke)", group: "tradition", value: 15 },
    { id: 24, label: "Enfoques\nNo-Occidentales", group: "tradition", value: 15 },

    // PODER
    { id: 51, label: "Gubernamentalidad\n(Foucault)", group: "power", value: 20 },
    { id: 52, label: "Justicia\nClim치tica", group: "power", value: 15 },
    
    // NATURALEZA
    { id: 33, label: "Biopol칤tica\nVegetal", group: "nature", value: 15 },
    { id: 34, label: "Nuevos\nMaterialismos", group: "nature", value: 15 }
  ]);

  const edges = new vis.DataSet([
    // Conexiones centrales
    { from: 0, to: 100, color: "#e74c3c", width: 3 },
    { from: 0, to: 21 }, { from: 0, to: 51 }, { from: 0, to: 33 },

    // Conexiones Fuego
    { from: 100, to: 101, label: "compuesto por", font: {align: 'middle'} },
    { from: 100, to: 102, label: "historia de" },
    { from: 101, to: 34, dashes: true, label: "teor칤a" }, // Conexi칩n con materialismo

    // Otras conexiones
    { from: 21, to: 23 }, { from: 21, to: 24 },
    { from: 51, to: 52 },
    { from: 33, to: 34 }
  ]);

  // --- CONFIGURACI칍N VIS.JS ---
  const container = document.getElementById('network');
  const data = { nodes: nodes, edges: edges };
  const options = {
    nodes: {
      shape: 'dot',
      font: { face: 'Lato', size: 14, color: '#333' },
      borderWidth: 2,
      shadow: true
    },
    edges: {
      width: 1,
      color: { color: '#bdc3c7', highlight: '#1a3c34' },
      smooth: { type: 'continuous' }
    },
    groups: {
      fire: { color: { background: '#e74c3c', border: '#c0392b' }, font: { color: '#c0392b', face: 'Playfair Display', size: 16 } },
      tradition: { color: { background: '#f39c12', border: '#d35400' } },
      power: { color: { background: '#8e44ad', border: '#6c3483' } },
      nature: { color: { background: '#27ae60', border: '#1e8449' } }
    },
    physics: {
      forceAtlas2Based: { gravitationalConstant: -100, springLength: 150 },
      solver: 'forceAtlas2Based'
    },
    interaction: { hover: true }
  };

  const network = new vis.Network(container, data, options);

  // --- INTERACCI칍N ---
  network.on("click", function (params) {
    if (params.nodes.length > 0) {
      const nodeId = params.nodes[0];
      const info = db[nodeId];
      
      const sidebar = document.getElementById('sidebar');
      const contentDiv = document.getElementById('content-body');

      if (info) {
        contentDiv.innerHTML = `
          <span class="author-tag">${info.type}</span>
          <h2 class="article-title">${info.title}</h2>
          <div style="font-size: 0.9rem; color: #666; margin-bottom: 20px;">${info.author}</div>
          ${info.content}
        `;
      } else {
        // Fallback para nodos sin contenido detallado en DB
        contentDiv.innerHTML = `
          <h2 class="article-title">Secci칩n del Manual</h2>
          <p>Explore los nodos conectados para ver detalles espec칤ficos de los cap칤tulos y autores.</p>
        `;
      }
      
      sidebar.classList.add('open');
    }
  });

  function closeSidebar() {
    document.getElementById('sidebar').classList.remove('open');
  }

  // Filtros
  function filterNodes(group, btn) {
    // UI Botones
    document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    if (group === 'all') {
      nodes.forEach(n => nodes.update({id: n.id, hidden: false}));
    } else {
      nodes.forEach(n => {
        const visible = (n.group === group || n.id === 0);
        nodes.update({id: n.id, hidden: !visible});
      });
    }
    network.fit();
  }

  // Ajuste inicial para m칩viles
  if (window.innerWidth < 768) {
    options.nodes.font.size = 10;
    network.setOptions(options);
  }
</script>
</body>
</html>
