---
---
<!doctype html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard Electoral — LABAP • CIRCPyCS</title>
  <meta name="description" content="LAP-CIRCPyCS: análisis electoral, indicadores institucionales y visualización interactiva para Bolivia 2025." />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ["Inter", "system-ui", "sans-serif"], serif: ["Merriweather", "serif"] },
          colors: {
            'academic-slate': '#1e293b', 
          }
        }
      }
    }
  </script>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
  <script src="https://cdn.plot.ly/plotly-2.32.0.min.js" defer></script>

  <style>
    /* Estilos Elite */
    .kpi-card { transition: all 0.2s ease; border: 1px solid #e2e8f0; }
    .kpi-card:hover { transform: translateY(-2px); border-color: #cbd5e1; box-shadow: 0 10px 30px -10px rgba(0,0,0,0.05); }
    /* Ajuste altura gráficos */
    #plotly-intencion-voto { height: 400px; width: 100%; }
    @media (min-width: 640px){ #plotly-intencion-voto { height: 500px; } }
    #bars-resultado { min-height: 320px; }
  </style>
</head>
<body class="bg-white text-slate-800 font-sans flex flex-col min-h-screen">

  <div class="h-1 w-full bg-gradient-to-r from-emerald-600 via-sky-600 to-rose-600"></div>

  <header class="border-b border-slate-200 bg-white sticky top-0 z-40 backdrop-blur-sm bg-white/95">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
      <a href="../index.html" class="flex items-center gap-3 group">
        <img src="https://i.imgur.com/ldeXZmG.png" alt="Logo" class="h-9 w-9 object-contain grayscale group-hover:grayscale-0 transition duration-500"/>
        <div class="leading-tight">
          <p class="text-[10px] uppercase tracking-widest text-slate-500 font-bold">UAGRM</p>
          <h1 class="font-serif font-bold text-lg text-slate-900">LABAP Analytics</h1>
        </div>
      </a>
      <nav class="hidden md:flex gap-8 text-sm font-medium text-slate-600">
        <a href="#" class="text-black font-bold border-b-2 border-black pb-1">Indicadores</a>
        <a href="proyectos.html" class="hover:text-black transition">Investigación</a>
        <a href="software.html" class="hover:text-black transition">Toolkit</a>
        <a href="data.html" class="hover:text-black transition">Datos</a>
        <a href="../index.html" class="hover:text-black transition">Inicio</a>
      </nav>
      <button id="btn-open" class="md:hidden text-slate-600"><i class="fa-solid fa-bars"></i></button>
    </div>
    
    <div id="mobile-menu" class="hidden md:hidden border-t border-slate-100 bg-slate-50 p-4 absolute w-full shadow-lg z-50">
        <div class="grid gap-3 text-sm">
            <a href="proyectos.html" class="block py-2">Investigación</a>
            <a href="data.html" class="block py-2">Datos</a>
            <a href="../index.html" class="block py-2 font-bold text-emerald-700">Volver a Inicio</a>
        </div>
    </div>
  </header>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 border-b border-slate-100">
    <div class="max-w-4xl">
        <span class="text-emerald-700 font-bold tracking-wider text-xs uppercase mb-3 block">Political Intelligence Unit</span>
        <h2 class="text-4xl md:text-5xl font-serif font-black text-slate-900 mb-6 leading-tight">
            Laboratorio de Análisis Político.
        </h2>
        <p class="text-lg text-slate-600 font-light leading-relaxed max-w-2xl">
            Plataforma de inteligencia de datos para el seguimiento electoral, evaluación de indicadores institucionales y prospectiva política para Bolivia 2025.
        </p>
    </div>
  </div>

  <main class="bg-slate-50 min-h-screen py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-12">

      <section id="dashboard">
        <div class="flex items-center justify-between mb-6">
            <h3 class="font-serif text-xl font-bold text-slate-900">Mega Dashboard Internacional</h3>
            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Bolivia 2025</span>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4">
            <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-gavel text-sky-600"></i> Rule of Law</div>
                <div class="text-3xl font-serif font-black text-slate-900">0.37</div>
                <div class="text-xs text-slate-400 mt-1">WJP 2024 (131/142)</div>
            </div>
            <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-globe text-emerald-600"></i> Democracy Index</div>
                <div class="text-3xl font-serif font-black text-slate-900">4.20<span class="text-lg text-slate-400">/10</span></div>
                <div class="text-xs text-slate-400 mt-1">EIU (Híbrido)</div>
            </div>
            <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-shield-alt text-rose-600"></i> Riesgo País</div>
                <div class="text-3xl font-serif font-black text-slate-900">2,190</div>
                <div class="text-xs text-slate-400 mt-1">EMBI (pb)</div>
            </div>
            <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-thumbs-up text-blue-600"></i> Aprobación Pres.</div>
                <div class="text-3xl font-serif font-black text-slate-900">24.1%</div>
                <div class="text-xs text-slate-400 mt-1">Mayo 2024</div>
            </div>
            <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-university text-amber-600"></i> Transparencia</div>
                <div class="text-3xl font-serif font-black text-slate-900">28<span class="text-lg text-slate-400">/100</span></div>
                <div class="text-xs text-slate-400 mt-1">CPI (133/180)</div>
            </div>
             <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-chart-bar text-indigo-600"></i> PIB Per Cápita</div>
                <div class="text-3xl font-serif font-black text-slate-900">$3,680</div>
                <div class="text-xs text-slate-400 mt-1">USD (2023)</div>
            </div>
             <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-users text-teal-600"></i> Población</div>
                <div class="text-3xl font-serif font-black text-slate-900">12.3M</div>
                <div class="text-xs text-slate-400 mt-1">Censo 2024</div>
            </div>
             <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-chart-area text-red-600"></i> Pobreza</div>
                <div class="text-3xl font-serif font-black text-slate-900">36.3%</div>
                <div class="text-xs text-slate-400 mt-1">Monetaria (INE)</div>
            </div>
             <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-graduation-cap text-sky-600"></i> Educ. Gasto</div>
                <div class="text-3xl font-serif font-black text-slate-900">6.5%</div>
                <div class="text-xs text-slate-400 mt-1">% del PIB</div>
            </div>
             <div class="kpi-card bg-white p-5 rounded-lg">
                <div class="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2"><i class="fas fa-poll text-purple-600"></i> Confianza Elec.</div>
                <div class="text-3xl font-serif font-black text-slate-900">29%</div>
                <div class="text-xs text-slate-400 mt-1">Latinobarómetro</div>
            </div>
        </div>
      </section>

      <section id="visualizacion" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        
        <div class="lg:col-span-2">
            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 h-full">
                <div class="mb-6">
                    <h4 class="font-serif text-xl font-bold text-slate-900">Tracking Poll: Intención de Voto 2025</h4>
                    <p class="text-sm text-slate-500 mt-1 font-light">Serie temporal de mediciones públicas (Mayo–Agosto 2025). Datos normalizados.</p>
                </div>
                <div id="plotly-intencion-voto"></div>
            </div>
        </div>

        <div class="space-y-6">
            
            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                <div class="flex justify-between items-center mb-4">
                    <h5 class="font-bold text-sm text-slate-900 uppercase tracking-wide">Primera Vuelta (Oficial)</h5>
                    <span class="bg-emerald-100 text-emerald-800 text-[10px] font-bold px-2 py-1 rounded">OEP</span>
                </div>
                <div id="bars-resultado"></div>
            </div>

            <div class="bg-slate-50 rounded-xl border border-slate-200 p-6 text-sm text-slate-600">
                <h5 class="font-bold text-slate-900 mb-3">Fuentes de Datos</h5>
                <ul class="space-y-2 font-light">
                    <li><strong class="text-slate-800">Ciemcorp:</strong> 22-26 Mayo, 5-7 Julio.</li>
                    <li><strong class="text-slate-800">SPIE:</strong> Múltiples mediciones (Jun-Ago).</li>
                    <li><strong class="text-slate-800">Captura:</strong> 10-20 Jun, 27 Jul-3 Ago.</li>
                    <li><strong class="text-slate-800">Ipsos:</strong> 25-27 Jul, 2-6 Ago.</li>
                </ul>
                <div class="mt-4 pt-4 border-t border-slate-200 text-xs text-slate-400">
                    * Línea punteada indica fecha de elección oficial.
                </div>
            </div>

        </div>
      </section>

    </div>
  </main>

  {% include footer.html %}

  <script>
    // Configuración de Menú Móvil
    const btnOpen = document.getElementById('btn-open');
    const mobileMenu = document.getElementById('mobile-menu');
    btnOpen.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });

    // --- DATOS Y GRÁFICOS --- //

    // Datos de encuestas
    const x = [
      "26/05 Ciemcorp<br><span style='font-size:10px'>Unitel</span>",
      "14/06 SPIE<br><span style='font-size:10px'>El Deber</span>",
      "20/06 Captura<br><span style='font-size:10px'>Red Uno</span>",
      "07/07 Ciemcorp<br><span style='font-size:10px'>Unitel</span>",
      "10/07 SPIE<br><span style='font-size:10px'>El Deber</span>",
      "27/07 Ipsos<br><span style='font-size:10px'>Unitel</span>",
      "28/07 SPIE<br><span style='font-size:10px'>El Deber</span>",
      "03/08 Captura<br><span style='font-size:10px'>Red Uno</span>",
      "04/08 SPIE<br><span style='font-size:10px'>El Deber</span>",
      "06/08 Ipsos<br><span style='font-size:10px'>Unitel</span>"
    ];

    const colores = {
      "Samuel Doria Medina": "#eab308",  // Yellow-500
      "Jorge «Tuto» Quiroga": "#ef4444", // Red-500
      "Manfred Reyes Villa":  "#8b5cf6", // Violet-500
      "Rodrigo Paz Pereira":  "#0d9488", // Teal-600
      "Andrónico Rodríguez":  "#16a34a", // Green-600
      "Jhonny Fernández":    "#2563eb"   // Blue-600
    };

    const ySeries = {
      "Samuel Doria Medina": [19.1, 24.02, 19.6, 18.7, 21.76, 21.5, 24.5, 21.6, 23.64, 21.2],
      "Jorge «Tuto» Quiroga": [18.4, 22.07, 16.6, 18.1, 20.70, 19.6, 22.9, 20.0, 24.45, 20.0],
      "Manfred Reyes Villa":  [7.9,  9.39,  8.8,  8.2, 10.01,  8.3,  7.2,  9.7,  8.79,  7.7],
      "Rodrigo Paz Pereira":  [4.3,  5.56,  6.4,  3.2,  4.04,  5.8,  7.6,  6.4,  9.10,  8.3],
      "Andrónico Rodríguez":  [14.2, 14.69, 13.7, 11.8,  8.26,  6.1,  7.4,  7.2,  8.46,  5.5],
      "Jhonny Fernández":    [3.7,  2.56,  3.8,  2.5,  2.45,  1.8,  2.1,  2.0,  2.44,  2.0]
    };

    const resultadoOficial = {
      fecha: "Elección<br><span style='font-size:10px'>Oficial</span>",
      valores: {
        "Rodrigo Paz Pereira": 32.06,
        "Jorge «Tuto» Quiroga": 26.70,
        "Samuel Doria Medina": 19.69,
        "Andrónico Rodríguez": 8.51,
        "Manfred Reyes Villa": 6.75,
        "Eduardo Del Castillo": 3.17,
        "Jhonny Fernández": 1.67,
        "Pavel Aracena Vargas": 1.45
      }
    };

    // --- RENDERIZADO PLOTLY (TEMA CLARO) ---

    function makeLayout(){
      const isMobile = window.innerWidth < 700;
      return {
        // Fondo Blanco para estética académica
        plot_bgcolor: '#ffffff',
        paper_bgcolor: '#ffffff',
        legend: { orientation: 'h', x: 0, y: 1.15, font: { family:'Inter', size: 11, color: '#475569' } },
        xaxis: { 
            title: null, 
            tickfont: { family:'Inter', size: 10, color: '#64748b' }, 
            gridcolor: '#f1f5f9',
            automargin: true 
        },
        yaxis: { 
            title: { text: '% Intención', font: { family:'Inter', size: 12, color: '#64748b' } },
            gridcolor: '#e2e8f0', 
            tickfont: { family:'Inter', color: '#64748b' },
            zerolinecolor: '#e2e8f0'
        },
        margin: { l:40, r:20, t:60, b:60 },
        // Línea vertical de elección
        shapes: [{ type:'line', xref:'x', yref:'paper', x0: resultadoOficial.fecha, x1: resultadoOficial.fecha, y0:0, y1:1, line:{ color:'#94a3b8', width:1, dash:'dash' } }],
        font: { family: 'Inter, sans-serif' }
      };
    }

    function buildTraces(){
      const traces = [];
      for (const [nombre, ys] of Object.entries(ySeries)){
        const trace = {
          x: [...x], y: [...ys], name: nombre,
          mode: 'lines+markers',
          line: { color: colores[nombre], width: 2, shape: 'spline' },
          marker: { size: 6, symbol: 'circle' },
          hovertemplate: `<b>${nombre}</b><br>%{y:.1f}%<extra></extra>`
        };
        // Añadir punto oficial si existe
        if (resultadoOficial.valores[nombre]) {
            trace.x.push(resultadoOficial.fecha);
            trace.y.push(resultadoOficial.valores[nombre]);
        }
        traces.push(trace);
      }
      return traces;
    }

    function renderLineChart(){
      Plotly.newPlot('plotly-intencion-voto', buildTraces(), makeLayout(), { responsive: true, displayModeBar: false });
    }

    function renderResultado(){
      const pares = Object.entries(resultadoOficial.valores).filter(([,v]) => v).sort((a,b) => b[1] - a[1]);
      const nombres = pares.map(p => p[0]);
      const valores = pares.map(p => p[1]);
      
      // Colores mapeados o gris por defecto
      const barColors = nombres.map(n => colores[n] || '#94a3b8');

      const trace = {
        type: 'bar',
        x: valores,
        y: nombres,
        orientation: 'h',
        marker: { color: barColors, opacity: 0.9 },
        text: valores.map(v => v + '%'),
        textposition: 'auto',
        hovertemplate: "%{x:.2f}%<extra></extra>"
      };

      const layout = {
        plot_bgcolor: '#ffffff',
        paper_bgcolor: '#ffffff',
        margin: { l: 120, r: 20, t: 10, b: 30 },
        xaxis: { showgrid: true, gridcolor: '#f1f5f9', zeroline: false },
        yaxis: { tickfont: { family:'Inter', size: 10, color: '#334155' } },
        font: { family: 'Inter, sans-serif' }
      };

      Plotly.newPlot('bars-resultado', [trace], layout, { responsive: true, displayModeBar: false });
    }

    // Inicialización
    window.onload = function() {
        if(window.Plotly) {
            renderLineChart();
            renderResultado();
        } else {
            // Fallback simple si Plotly tarda
            setTimeout(() => { renderLineChart(); renderResultado(); }, 1000);
        }
    };
    
    window.addEventListener('resize', () => {
        Plotly.Plots.resize('plotly-intencion-voto');
        Plotly.Plots.resize('bars-resultado');
    });
  </script>

</body>
</html>
