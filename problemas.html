<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CIRCPyCS – Selección de Problemas de Investigación</title>

  <!-- Bootstrap & Font-Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    :root{
      --primary:#2c3e50;--secondary:#8e44ad;--accent:#16a085;
      --bg:#f8f9fa;--text:#34495e;--light:#e9ecef;--dark:#6c757d;
      --header:#2c3e50;--shadow:0 8px 18px rgba(0,0,0,.1);
    }
    body{font-family:"Segoe UI",sans-serif;background:var(--bg);color:var(--text);margin:0;padding-top:80px;font-size:.95rem;}

    /* Header */
    .navbar-custom{background:var(--header)!important;box-shadow:0 2px 10px rgba(0,0,0,.1);position:fixed;width:100%;top:0;z-index:1000;}
    .navbar-brand{font-family:"Playfair Display",serif;font-weight:700;font-size:1.4rem;color:#fff!important;}
    .btn-volver{border-color:#fff;color:#fff!important;font-size:.85rem;}
    .btn-volver:hover{background:rgba(255,255,255,.1);}

    /* Layout */
    .contenedor-principal{max-width:1200px;margin:2rem auto;padding:0 15px;}
    .titulo-principal{text-align:center;color:var(--primary);margin-bottom:1.5rem;font-weight:700;font-size:1.8rem;}
    .subtitulo{text-align:center;color:var(--dark);margin-bottom:2rem;font-size:1.1rem;}

    /* Filtros */
    .filtros-container{background:#fff;border-radius:15px;box-shadow:var(--shadow);padding:1.5rem;margin-bottom:2rem;}
    .filtros-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;}
    .filtros-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;}
    .filtro-grupo label{font-weight:600;margin-bottom:.5rem;display:block;}
    .filtro-grupo select,.filtro-grupo input{width:100%;padding:.5rem;border-radius:8px;border:1px solid #ced4da;}
    .btn-filtros{background:var(--secondary);color:#fff;border:none;padding:.5rem 1.5rem;border-radius:20px;font-weight:600;transition:.3s;}
    .btn-filtros:hover{background:#7d3c98;transform:translateY(-2px);}
    .btn-reset{background:var(--dark);color:#fff;border:none;padding:.5rem 1.5rem;border-radius:20px;font-weight:600;transition:.3s;}
    .btn-reset:hover{background:#5a6268;transform:translateY(-2px);}

    /* Tarjetas */
    .contenedor-tarjetas{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem;}
    .tarjeta-problema{background:#fff;border-radius:15px;box-shadow:var(--shadow);padding:1.5rem;border-left:5px solid var(--secondary);display:flex;flex-direction:column;transition:.3s;}
    .tarjeta-problema:hover{transform:translateY(-5px);box-shadow:0 12px 25px rgba(0,0,0,.15);}
    .tarjeta-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;}
    .codigo-problema{background:var(--secondary);color:#fff;padding:.3rem .8rem;border-radius:20px;font-weight:600;font-size:.9rem;}
    .area-problema{background:var(--light);color:var(--text);padding:.3rem .8rem;border-radius:20px;font-weight:600;font-size:.9rem;}
    .politica{background:#3498db!important;color:#fff;}
    .economia{background:#2ecc71!important;color:#fff;}
    .ambiental{background:#e74c3c!important;color:#fff;}
    .social{background:#f39c12!important;color:#fff;}
    .titulo-problema{font-weight:700;font-size:1.1rem;margin-bottom:.8rem;color:var(--primary);}
    .linea-investigacion{background:var(--light);padding:.3rem .8rem;border-radius:20px;font-size:.85rem;display:inline-block;margin-bottom:.8rem;}
    .pregunta-problema{font-size:.95rem;margin-bottom:1.2rem;flex-grow:1;}
    .asignado-a{font-size:.9rem;margin-bottom:1rem;color:var(--dark);font-style:italic;}
    .btn-detalles{background:var(--accent);color:#fff;border:none;padding:.5rem 1.2rem;border-radius:20px;font-weight:600;transition:.3s;width:100%;text-align:center;}
    .btn-detalles:hover{background:#138a72;transform:translateY(-2px);}

    /* Modal */
    .modal-content{border-radius:15px;}
    .modal-header{border-bottom:none;padding-bottom:0;}
    .modal-title{color:var(--primary);font-weight:700;}
    .detalle-grupo{margin-bottom:1.5rem;}
    .detalle-titulo{font-weight:600;margin-bottom:.5rem;color:var(--secondary);}
    .detalle-contenido{background:var(--light);padding:1rem;border-radius:10px;}
    .metodologia-badge{display:inline-block;background:var(--accent);color:#fff;padding:.3rem .8rem;border-radius:20px;margin:.3rem;font-size:.85rem;}

    /* Formulario */
    .formulario-grupo{margin-bottom:1.5rem;}
    .formulario-grupo label{display:block;margin-bottom:.5rem;font-weight:600;}
    .formulario-grupo input,.formulario-grupo select{width:100%;padding:.75rem;border-radius:8px;border:1px solid #ced4da;font-size:1rem;}
    .btn-formulario{background:var(--secondary);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;font-size:1rem;cursor:pointer;transition:.3s;width:100%;margin-top:1rem;}
    .btn-formulario:hover{background:#7d3c98;transform:translateY(-2px);}

    /* Footer */
    footer{background:var(--header);color:#fff;text-align:center;padding:1.5rem;margin-top:3rem;font-size:.9rem;}
    footer a{color:#fff;margin:0 .3rem;transition:color .3s;}
    footer a:hover{color:var(--accent);}
    .footer-contacto{margin:.5rem 0;}

    /* Responsive */
    @media(max-width:768px){
      .contenedor-tarjetas{grid-template-columns:1fr;}
      .filtros-row{grid-template-columns:1fr;}
      .filtros-header{flex-direction:column;align-items:flex-start;}
      .botones-filtros{margin-top:1rem;width:100%;display:flex;gap:.5rem;}
      .btn-filtros,.btn-reset{flex:1;}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
    <div class="container">
      <a class="navbar-brand" href="#">CIRCPyCS</a>
      <a href="https://cir.uagrm.edu.bo/" class="btn btn-outline-light btn-volver">
        <i class="fas fa-arrow-left"></i> Volver al Inicio
      </a>
    </div>
  </nav>

  <!-- Contenido principal -->
  <div class="contenedor-principal">
    <h1 class="titulo-principal">Problemas de Investigación 2025–2026</h1>
    <p class="subtitulo">Explora y selecciona un problema de investigación para abordar</p>

    <!-- Filtros -->
    <div class="filtros-container">
      <div class="filtros-header">
        <h2><i class="fas fa-filter"></i> Filtros de Búsqueda</h2>
        <div class="botones-filtros">
          <button class="btn btn-filtros" id="aplicarFiltros"><i class="fas fa-check"></i> Aplicar Filtros</button>
          <button class="btn btn-reset"  id="resetFiltros"><i class="fas fa-sync-alt"></i> Reiniciar</button>
        </div>
      </div>
      <div class="filtros-row">
        <div class="filtro-grupo">
          <label for="filtro-area"><i class="fas fa-layer-group"></i> Área</label>
          <select id="filtro-area" class="form-select">
            <option value="">Todas las áreas</option>
            <option>Política</option><option>Economía</option><option>Ambiental</option><option>Social</option>
          </select>
        </div>
        <div class="filtro-grupo">
          <label for="filtro-linea"><i class="fas fa-stream"></i> Línea de Investigación</label>
          <select id="filtro-linea" class="form-select">
            <option value="">Todas</option>
            <option>Sistema Político e Instituciones Públicas</option>
            <option>Desarrollo, Innovación y Tecnología</option>
            <option>Comportamiento Político y Cognición Política</option>
            <option>Partidos y Organizaciones Políticas</option>
            <option>Estado Plurinacional, Democracia e Interculturalidad</option>
            <option>Ciencia Política Computacional</option>
            <option>Desarrollo Productivo, Agroindustria y Economía</option>
            <option>Cambio Climático y Recursos Naturales</option>
            <option>Sociedad, Salud y Educación</option>
          </select>
        </div>
        <div class="filtro-grupo">
          <label for="filtro-estado"><i class="fas fa-tasks"></i> Estado</label>
          <select id="filtro-estado" class="form-select">
            <option value="">Todos</option>
            <option value="asignado">Asignado</option>
            <option value="disponible">Disponible</option>
          </select>
        </div>
        <div class="filtro-grupo">
          <label for="filtro-busqueda"><i class="fas fa-search"></i> Buscar</label>
          <input type="text" id="filtro-busqueda" class="form-control" placeholder="Código, línea o tema…">
        </div>
      </div>
    </div>

    <!-- Tarjetas -->
    <div class="contenedor-tarjetas" id="contenedor-problemas"></div>
  </div>

  <!-- Modal Detalles -->
  <div class="modal fade" id="modalDetalles" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalTitulo"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body" id="modalCuerpo"></div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          <button type="button" class="btn btn-primary" id="btnSeleccionar">Seleccionar este problema</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Formulario -->
  <div class="modal fade" id="modalFormulario" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Registro de Investigador</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <div class="formulario-grupo">
            <label for="nombre">Nombre completo</label>
            <input type="text" id="nombre" placeholder="Ingresa tu nombre completo">
          </div>
          <div class="formulario-grupo">
            <label for="email">Correo electrónico</label>
            <input type="email" id="email" placeholder="Ingresa tu correo institucional">
          </div>
          <div class="formulario-grupo">
            <label for="matricula">Matrícula</label>
            <input type="text" id="matricula" placeholder="Número de matrícula">
          </div>
          <div class="formulario-grupo">
            <label for="carrera">Carrera</label>
            <select id="carrera">
              <option value="">Selecciona tu carrera</option>
              <option>Ciencia Política</option><option>Administración Pública</option><option>Sociología</option><option>Economía</option><option>Derecho</option><option>Otra</option>
            </select>
          </div>
          <div class="formulario-grupo">
            <label for="semestre">Semestre</label>
            <select id="semestre">
              <option value="">Selecciona tu semestre</option>
              <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option>
            </select>
          </div>
          <button class="btn-formulario" id="btnRegistrar"><i class="fas fa-file-pdf"></i> Generar PDF y Registrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; 2025 Centro de Investigación Regional en Ciencia Política y Ciencias Sociales UAGRM (CIRCPyCS)</p>
      <p class="footer-contacto">
        Contacto: <a href="mailto:cri.cspoliticas.fcjpsri@uagrm.edu.bo">cri.cspoliticas.fcjpsri@uagrm.edu.bo</a> |
        <i class="fas fa-phone"></i> +591 67381294
      </p>
      <div class="footer-social">
        Síguenos en:
        <a href="https://www.facebook.com" target="_blank"><i class="fab fa-facebook-f"></i></a>
        <a href="https://www.twitter.com"  target="_blank"><i class="fab fa-twitter"></i></a>
        <a href="https://www.instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  /*----------------------------------------------------
    Datos (EP-01/02/03 ya figuran en área Economía)
  ----------------------------------------------------*/
  const problemas = [
    /* POLÍTICA */
    {codigo:"P-01",area:"Política",linea:"Sistema Político e Instituciones Públicas",tema:"Polarización política, afectiva e ideológica",
     pregunta:"¿Cuáles son las características de la polarización en Bolivia entre 2019 y 2025?",
     objetivo:"Analizar el impacto de la polarización política en Bolivia entre 2019 y 2025 y sus efectos en la estabilidad/inestabilidad política del país.",
     metodologia:"Análisis de redes semánticas + Modelos de opinión dinámica (Hegselmann-Krause)",asignado:"Orlando Peralta",estado:"asignado"},
    /* … (resto igual, omitido por brevedad aquí) … */
    /* ECONOMÍA – se incorporan EP-xx */
    {codigo:"EP-01",area:"Economía",linea:"Medio Ambiente, Economía Verde y Recursos Naturales Estratégicos",tema:"Modelo extractivista e institucionalidad ambiental",
     pregunta:"¿Qué grado de institucionalidad ambiental existe en Bolivia para compatibilizar el crecimiento económico basado en recursos naturales con el desarrollo sostenible?",
     metodologia:"Análisis de metabolismo social + Indicadores de sostenibilidad fuerte",asignado:"Maria Angélica Suarez",estado:"asignado"},
    {codigo:"EP-02",area:"Economía",linea:"Salud, Sociedad y Educación",tema:"Instituciones, seguridad jurídica y atracción de inversión extranjera",
     pregunta:"¿Qué rol tuvo la debilidad institucional en políticas post-COVID?",
     metodologia:"Análisis de brechas de implementación + Mapeo de actores clave",asignado:"Elizabeth Galarza",estado:"asignado"},
    {codigo:"EP-03",area:"Economía",linea:"Estado Plurinacional, Democracia e Interculturalidad",tema:"Federalismo fiscal e institucionalidad económica en gobiernos intermedios",
     pregunta:"¿Cómo incide el diseño institucional del régimen de transferencias fiscales en la autonomía económica y eficiencia del gasto público de los gobiernos subnacionales?",
     metodologia:"Análisis de eficiencia fiscal + Modelos de descentralización óptima",asignado:"Javier Hernández",estado:"asignado"}
  ];
  /*----------------------------------------------------
    Variables & modales
  ----------------------------------------------------*/
  let problemasFiltrados=[...problemas], problemaSeleccionado=null;
  const modalDetalles=new bootstrap.Modal("#modalDetalles");
  const modalFormulario=new bootstrap.Modal("#modalFormulario");

  /*----------------------------------------------------
    INIT
  ----------------------------------------------------*/
  document.addEventListener("DOMContentLoaded",()=>{renderizarProblemas();configurarEventos();});

  /*----------------------------------------------------
    Renderizar tarjetas  (línea = título, tema = píldora)
  ----------------------------------------------------*/
  function renderizarProblemas(){
    const cont=document.getElementById("contenedor-problemas");
    cont.innerHTML="";
    if(!problemasFiltrados.length){
      cont.innerHTML=`<div class="col-12 text-center py-5">
        <i class="fas fa-search fa-3x mb-3 text-secondary"></i>
        <h3>No se encontraron problemas</h3>
        <p>Intenta ajustar los filtros o términos de búsqueda.</p></div>`;
      return;
    }
    problemasFiltrados.forEach(p=>{
      const cls=p.area.toLowerCase().replace(/[^a-záéíóúñ]/g,"");
      const div=document.createElement("div");
      div.className="tarjeta-problema";
      div.innerHTML=`
        <div class="tarjeta-header">
          <span class="codigo-problema">${p.codigo}</span>
          <span class="area-problema ${cls}">${p.area}</span>
        </div>
        <div class="titulo-problema">${p.linea}</div>
        <span class="linea-investigacion">${p.tema}</span>
        <div class="pregunta-problema">${p.pregunta}</div>
        <div class="asignado-a">Asignado a: <strong>${p.asignado}</strong></div>
        <button class="btn-detalles" data-codigo="${p.codigo}">
          <i class="fas fa-info-circle"></i> Ver detalles
        </button>`;
      cont.appendChild(div);
    });
    document.querySelectorAll(".btn-detalles").forEach(b=>b.onclick=()=>mostrarDetallesProblema(b.dataset.codigo));
  }

  /*----------------------------------------------------
    Modal detalles
  ----------------------------------------------------*/
  function mostrarDetallesProblema(codigo){
    problemaSeleccionado=problemas.find(p=>p.codigo===codigo);
    if(!problemaSeleccionado)return;
    document.getElementById("modalTitulo").textContent=problemaSeleccionado.linea;
    document.getElementById("modalCuerpo").innerHTML=`
      <div class="detalle-grupo"><div class="detalle-titulo">Tema</div>
        <div class="detalle-contenido">${problemaSeleccionado.tema}</div></div>
      <div class="detalle-grupo"><div class="detalle-titulo">Área</div>
        <div class="detalle-contenido">${problemaSeleccionado.area}</div></div>
      <div class="detalle-grupo"><div class="detalle-titulo">Línea de Investigación</div>
        <div class="detalle-contenido">${problemaSeleccionado.linea}</div></div>
      <div class="detalle-grupo"><div class="detalle-titulo">Pregunta</div>
        <div class="detalle-contenido">${problemaSeleccionado.pregunta}</div></div>
      ${problemaSeleccionado.objetivo?`
        <div class="detalle-grupo"><div class="detalle-titulo">Objetivo</div>
          <div class="detalle-contenido">${problemaSeleccionado.objetivo}</div></div>`:""}
      <div class="detalle-grupo"><div class="detalle-titulo">Metodología</div>
        <div class="detalle-contenido">${
          problemaSeleccionado.metodologia.split("+").map(m=>`<span class="metodologia-badge">${m.trim()}</span>`).join("")
        }</div></div>`;
    document.getElementById("btnSeleccionar").onclick=()=>{modalDetalles.hide();setTimeout(mostrarFormularioRegistro,300);};
    modalDetalles.show();
  }

  /*----------------------------------------------------
    Formulario
  ----------------------------------------------------*/
  function mostrarFormularioRegistro(){["nombre","email","matricula","carrera","semestre"].forEach(id=>document.getElementById(id).value="");modalFormulario.show();}

  /*----------------------------------------------------
    Filtros y eventos
  ----------------------------------------------------*/
  function configurarEventos(){
    document.getElementById("aplicarFiltros").onclick=aplicarFiltros;
    document.getElementById("resetFiltros").onclick=resetFiltros;
    document.getElementById("filtro-busqueda").oninput=aplicarFiltros;
    document.getElementById("btnRegistrar").onclick=registrarProblema;
  }
  function aplicarFiltros(){
    const area=document.getElementById("filtro-area").value.toLowerCase();
    const linea=document.getElementById("filtro-linea").value.toLowerCase();
    const estado=document.getElementById("filtro-estado").value;
    const q=document.getElementById("filtro-busqueda").value.toLowerCase();
    problemasFiltrados=problemas.filter(p=>{
      const okArea=!area||p.area.toLowerCase().includes(area);
      const okLinea=!linea||p.linea.toLowerCase().includes(linea);
      const okEstado=!estado||(estado==="asignado"&&p.estado==="asignado")||(estado==="disponible"&&p.estado==="disponible");
      const okQ=!q||p.codigo.toLowerCase().includes(q)||p.tema.toLowerCase().includes(q)||p.linea.toLowerCase().includes(q);
      return okArea&&okLinea&&okEstado&&okQ;
    });
    renderizarProblemas();
  }
  function resetFiltros(){["filtro-area","filtro-linea","filtro-estado","filtro-busqueda"].forEach(id=>document.getElementById(id).value="");problemasFiltrados=[...problemas];renderizarProblemas();}

  /*----------------------------------------------------
    Registro + descarga PDF (función jsPDF sin cambios)
  ----------------------------------------------------*/
  async function registrarProblema(){
    const nombre=document.getElementById("nombre").value.trim(),
          email=document.getElementById("email").value.trim(),
          matricula=document.getElementById("matricula").value.trim(),
          carrera=document.getElementById("carrera").value,
          semestre=document.getElementById("semestre").value;
    if(!nombre||!email||!matricula||!carrera||!semestre){alert("Completa todos los campos.");return;}
    await generarCertificado(nombre,"Investigador Estudiantil",[`${problemaSeleccionado.codigo} – ${problemaSeleccionado.linea}`]);
    modalFormulario.hide();alert("¡Registro exitoso! Se descargó tu certificado.");
  }

  /*----------------------------------------------------
    Certificado jsPDF (idéntico al que ya funciona)
  ----------------------------------------------------*/
  async function generarCertificado(nombreInvestigador,tipoInvestigador,lineasInvestigacion){
    const{jsPDF}=window.jspdf;const doc=new jsPDF({format:"letter"});
    doc.setFillColor(255,255,255);doc.rect(0,0,216,279,"F");
    const marca=await cargarImagen("https://i.imgur.com/OjAw4PH.png");
    doc.setGState(new doc.GState({opacity:.15}));doc.addImage(marca,"PNG",30,90,150,150);doc.setGState(new doc.GState({opacity:1}));
    const logo=await cargarImagen("https://i.imgur.com/R952Ljv.png");doc.addImage(logo,"PNG",60,5,90,20);
    doc.setFont("helvetica","bold");doc.setFontSize(14);doc.setTextColor("#B22222");
    doc.text("UNIVERSIDAD AUTÓNOMA GABRIEL RENÉ MORENO",108,30,{align:"center"});
    doc.setTextColor("#003366");doc.setFontSize(12);
    doc.text("Facultad de Ciencias Jurídicas, Políticas, Sociales y Relaciones Internacionales",108,35,{align:"center"});
    doc.text("Carrera de Ciencia Política y Administración Pública",108,40,{align:"center"});
    doc.text("Centro de Investigación Regional en Ciencia Política y Ciencias Sociales",108,45,{align:"center"});
    doc.setFontSize(20);doc.text("Certificación de Elección de Problema de Investigación",108,65,{align:"center"});
    const tenor=`Por medio del presente, el Centro de Investigación Regional en Ciencia Política y Ciencias Sociales (CIRCPyCS) de la Universidad Autónoma Gabriel René Moreno certifica que ${nombreInvestigador}, estudiante de la ${tipoInvestigador}, ha seleccionado formalmente el problema de investigación ${lineasInvestigacion[0]}. El investigador se compromete a desarrollar y culminar dicho proyecto durante el período académico 2025-2026, siguiendo las directrices metodológicas acordadas con su tutor y con la coordinación del CIRCPyCS.\n\nEsta certificación se expide a solicitud del interesado, para los fines académicos y administrativos que creyere convenientes.`;
    doc.setFont("helvetica","normal");doc.setFontSize(12);doc.setTextColor(0,0,0);
    doc.text(doc.splitTextToSize(tenor,160),25,90);
    const y=190;doc.setFontSize(10);doc.text(`Santa Cruz de la Sierra, ${new Date().toLocaleDateString()}`,108,y,{align:"center"});
    const f1=await cargarImagen("https://i.imgur.com/o9tccxV.png"),f2=await cargarImagen("https://i.imgur.com/vvpbKq7.png");
    doc.addImage(f1,"PNG",40,y+10,40,20);doc.addImage(f2,"PNG",135,y+10,40,20);
    doc.setFont("helvetica","bold");doc.text("Francisco Méndez Égüez",60,y+35,{align:"center"});doc.text("Director Carrera",60,y+40,{align:"center"});
    doc.text("María A. Suárez Ribera",155,y+35,{align:"center"});doc.text("Directora CIRCPyCS",155,y+40,{align:"center"});
    doc.setDrawColor(178,34,34);doc.setLineWidth(.5);doc.line(10,265,206,265);
    doc.setFont("helvetica","normal");doc.setFontSize(10);
    doc.text("cri.cspoliticas.fcjpsri@uagrm.edu.bo | Ciudad Universitaria, UAGRM, Módulo 284, Planta Baja",108,272,{align:"center"});
    doc.save(`Certificacion_${nombreInvestigador.replace(/\s+/g,"_")}.pdf`);
  }
  function cargarImagen(url){return new Promise((ok,er)=>{const i=new Image();i.crossOrigin="anonymous";i.onload=()=>ok(i);i.onerror=er;i.src=url;});}
  </script>
</body>
</html>

