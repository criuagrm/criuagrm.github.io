<!doctype html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>CIRCPyCS — Demo 6 Problemas de Investigación</title>
  <meta name="description" content="Vista previa del nuevo formato para problemas de investigación (6 items)."/>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ["Inter","ui-sans-serif","system-ui","Segoe UI","Roboto","Helvetica Neue","Arial"] },
          boxShadow: { soft: '0 8px 24px rgba(2,6,23,.08)' },
          colors: {
            brand: '#0b1220',
            ink: '#0f172a',
            slate2: '#eef2f7'
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    .chip{display:inline-flex;align-items:center;gap:.4rem;padding:.24rem .6rem;border-radius:9999px;font-size:.72rem;line-height:1rem}
    .line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .line-clamp-3{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
    section[id]{ scroll-margin-top: 92px; }
    /* Modal */
    .modal-enter{opacity:0;transform:translateY(8px) scale(.98)}
    .modal-enter-active{opacity:1;transform:translateY(0) scale(1);transition:all .14s ease}
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800">
  <!-- Cinta superior -->
  <div class="h-1 w-full bg-gradient-to-r from-emerald-600 via-sky-600 to-rose-600"></div>

  <!-- Header -->
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-between">
      <a href="#inicio" class="flex items-center gap-3 group">
        <img src="https://i.imgur.com/ldeXZmG.png" alt="Logo" class="h-9 w-9 object-contain"/>
        <div class="leading-tight">
          <p class="text-xs tracking-wide text-slate-500">UAGRM</p>
          <h1 class="font-bold text-lg">CIRCPyCS</h1>
        </div>
      </a>
      <a href="https://cir.uagrm.edu.bo/" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border border-slate-200 text-sm hover:border-sky-600 hover:text-sky-700">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M15 6l-6 6 6 6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <span>Volver a inicio</span>
      </a>
    </div>
  </header>

  <!-- Hero -->
  <section id="inicio" class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10 opacity-20" aria-hidden="true">
      <div class="absolute -top-24 -left-24 h-64 w-64 rounded-full bg-emerald-500 blur-3xl"></div>
      <div class="absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-rose-500 blur-3xl"></div>
    </div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 lg:py-14">
      <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200">Demo formato</span>
      <h2 class="mt-3 text-3xl sm:text-4xl font-extrabold tracking-tight">Problemas de investigación — Vista previa (6)</h2>
      <p class="mt-2 max-w-3xl text-slate-600">Contenido fiel al original. Filtros y detalle en modal. Luego podrás pegar el resto del listado.</p>
    </div>
  </section>

  <!-- Filtros -->
  <section class="pb-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="rounded-2xl border border-slate-200 bg-white p-4 sm:p-5 shadow-soft">
        <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
          <h3 class="font-semibold">Filtros</h3>
          <div class="flex gap-2">
            <button id="btn-aplicar" class="px-3 py-2 rounded-xl bg-sky-700 text-white text-sm hover:bg-sky-600">Aplicar</button>
            <button id="btn-reset" class="px-3 py-2 rounded-xl border border-slate-300 text-sm hover:border-sky-600 hover:text-sky-700">Reiniciar</button>
          </div>
        </div>
        <div class="mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-4">
          <label class="text-sm">
            <span class="block text-slate-600 mb-1">Área</span>
            <select id="f-area" class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"></select>
          </label>
          <label class="text-sm">
            <span class="block text-slate-600 mb-1">Línea</span>
            <select id="f-linea" class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"></select>
          </label>
          <label class="text-sm">
            <span class="block text-slate-600 mb-1">Estado</span>
            <select id="f-estado" class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm">
              <option value="">Todos</option>
              <option value="asignado">Asignado</option>
              <option value="disponible">Disponible</option>
            </select>
          </label>
          <label class="text-sm">
            <span class="block text-slate-600 mb-1">Buscar</span>
            <input id="f-q" type="search" placeholder="Código, línea o tema…" class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"/>
          </label>
        </div>
      </div>
    </div>
  </section>

  <!-- Grid -->
  <main class="pb-14">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div id="grid" class="mt-4 grid gap-4 sm:gap-5 md:grid-cols-2 xl:grid-cols-3"></div>
    </div>
  </main>

  <!-- Modal Detalle -->
  <div id="modal" class="fixed inset-0 z-40 hidden" aria-hidden="true">
    <div class="absolute inset-0 bg-black/40" id="modal-overlay"></div>
    <div class="relative mx-auto mt-20 w-[92%] max-w-2xl rounded-2xl bg-white shadow-2xl modal-enter" id="modal-card" role="dialog" aria-modal="true">
      <div class="p-5 border-b border-slate-200 flex items-start justify-between gap-3">
        <h4 id="m-titulo" class="font-bold text-lg text-ink"></h4>
        <button id="m-close" class="p-2 rounded-lg hover:bg-slate-100" aria-label="Cerrar">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="p-5 space-y-4 text-sm" id="m-body"></div>
      <div class="p-5 border-t border-slate-200 flex items-center justify-end gap-2">
        <button id="m-ok" class="px-3 py-2 rounded-xl bg-emerald-600 text-white text-sm hover:bg-emerald-500">Entendido</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="border-t border-slate-200 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-sm text-slate-600 text-center">
      <p>© <span id="year"></span> Centro de Investigación Regional en Ciencia Política y Ciencias Sociales UAGRM (CIRCPyCS)</p>
      <p class="mt-1">Contacto: <a class="text-sky-700 hover:underline" href="mailto:cri.cspoliticas.fcjpsri@uagrm.edu.bo">cri.cspoliticas.fcjpsri@uagrm.edu.bo</a> · +591 67381294</p>
    </div>
  </footer>

  <script>
    // Año dinámico
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Datos (6 EXACTOS, fieles al original) =====
    /**
     * Tomados textualmente del listado original:
     * P-01, P-02, P-03, P-04, P-05, P-06 (área Política)
     */
    const PROBLEMAS = [
      {
        codigo: "P-01",
        area: "Política",
        linea: "Sistema Político e Instituciones Públicas",
        tema: "Polarización política, afectiva e ideológica",
        pregunta: "¿Cuáles son las características de la polarización en Bolivia entre 2019 y 2025?",
        objetivo: "Analizar el impacto de la polarización política en Bolivia (2019-2025) y sus efectos en la estabilidad institucional.",
        metodologia: "Análisis de redes semánticas + Modelos de opinión dinámica (Hegselmann-Krause)",
        asignado: "Orlando Peralta",
        estado: "asignado"
      },
      {
        codigo: "P-02",
        area: "Política",
        linea: "Desarrollo, Innovación y Tecnología",
        tema: "Políticas de innovación en Bolivia 2025",
        pregunta: "¿Qué políticas públicas fomentan los ecosistemas emprendedores en Bolivia y América Latina?",
        objetivo: "Examinar y comparar políticas de innovación nacionales y regionales.",
        metodologia: "Análisis de ecosistemas institucionales (IE) + Benchmarking regulatorio con QCA",
        asignado: "Roman Cruz",
        estado: "asignado"
      },
      {
        codigo: "P-03",
        area: "Política",
        linea: "Sistema Político e Instituciones Públicas",
        tema: "Las instituciones públicas en el marco del Estado Plurinacional",
        pregunta: "¿Cómo condicionan las decisiones políticas la evolución de las instituciones públicas plurinacionales?",
        objetivo: "Explicar la evolución institucional y la acción estratégica de los actores políticos.",
        metodologia: "Teoría de juegos institucional + Análisis de redes de políticas públicas",
        asignado: "José Luis Andia",
        estado: "asignado"
      },
      {
        codigo: "P-04",
        area: "Política",
        linea: "Comportamiento Político y Cognición Política",
        tema: "El proceso político-electoral boliviano 2025",
        pregunta: "¿Qué estrategias comunicacionales usan los candidatos presidenciales (abr-ago 2025)?",
        objetivo: "Evaluar independencia del OEP y las estrategias mediáticas de campaña.",
        metodologia: "Análisis de framing multimodal + Minería de datos en redes sociales (BERT)",
        asignado: "Odín Rodríguez",
        estado: "asignado"
      },
      {
        codigo: "P-05",
        area: "Política",
        linea: "Partidos y Organizaciones Políticas, Grupos de Presión y Sociedad Civil",
        tema: "Impacto mediático de las alianzas políticas en la campaña 2025",
        pregunta: "¿Cómo influyen las alianzas en cobertura mediática y percepción del electorado?",
        objetivo: "Analizar influencia de alianzas en medios y opinión pública.",
        metodologia: "Análisis de redes de atención mediática + Modelos de difusión de influencia",
        asignado: "Orlando Peralta",
        estado: "asignado"
      },
      {
        codigo: "P-06",
        area: "Política",
        linea: "Administración Pública",
        tema: "Avances y retrocesos de la administración pública plurinacional",
        pregunta: "¿Cómo se caracteriza la lentitud burocrática y la descentralización en Bolivia?",
        objetivo: "Examinar procedimientos administrativos y eficiencia organizacional.",
        metodologia: "Análisis de procesos burocráticos (BPA) + Modelos DEA",
        asignado: "Manfredo Bravo",
        estado: "asignado"
      }
    ];

    // ===== Utilidades =====
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    const badgeByArea = (area) => {
      const map = {
        'Política': 'bg-sky-600 text-white',
        'Economía': 'bg-emerald-600 text-white',
        'Ambiental': 'bg-rose-600 text-white',
        'Social': 'bg-amber-500 text-white'
      };
      return map[area] || 'bg-slate-200 text-slate-700';
    };

    function unique(items, key){
      return [...new Set(items.map(i => i[key]).filter(Boolean))];
    }

    // ===== Estado de filtros =====
    const state = { area:'', linea:'', estado:'', q:'' };

    function buildFilters(){
      const selArea = $('#f-area');
      const selLinea = $('#f-linea');

      // Área
      const areas = unique(PROBLEMAS, 'area');
      selArea.innerHTML = '<option value="">Todas</option>' + areas.map(a => `<option>${a}</option>`).join('');

      // Línea
      const lineas = unique(PROBLEMAS, 'linea');
      selLinea.innerHTML = '<option value="">Todas</option>' + lineas.map(l => `<option>${l}</option>`).join('');
    }

    function applyFilters(){
      const list = PROBLEMAS.filter(p => {
        const okArea = !state.area || p.area === state.area;
        const okLinea = !state.linea || p.linea === state.linea;
        const okEstado = !state.estado || p.estado === state.estado;
        const q = state.q.trim().toLowerCase();
        const okQ = !q || (
          p.codigo.toLowerCase().includes(q) ||
          p.tema.toLowerCase().includes(q) ||
          p.linea.toLowerCase().includes(q)
        );
        return okArea && okLinea && okEstado && okQ;
      });
      renderCards(list);
    }

    function renderCards(items){
      const grid = $('#grid');
      grid.innerHTML = '';
      if (!items.length){
        grid.innerHTML = `<div class="col-span-full grid place-items-center text-center py-10 rounded-2xl bg-white border border-dashed border-slate-300">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden="true" class="text-slate-500 mb-2"><path d="M21 21l-4.35-4.35M10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
          <p class="font-semibold">Sin resultados</p>
          <p class="text-sm text-slate-500">Ajusta los filtros o el término de búsqueda.</p>
        </div>`;
        return;
      }

      items.forEach(p => {
        const card = document.createElement('article');
        card.className = 'rounded-2xl bg-white border border-slate-200 shadow-soft p-4 flex flex-col';
        card.innerHTML = `
          <div class="flex items-center justify-between gap-3">
            <span class="chip bg-slate-900 text-white font-semibold">${p.codigo}</span>
            <span class="chip ${badgeByArea(p.area)}">${p.area}</span>
          </div>
          <h4 class="mt-3 font-semibold text-ink">${p.linea}</h4>
          <div class="mt-2"> <span class="chip bg-slate-100 text-slate-700">${p.tema}</span> </div>
          <p class="mt-3 text-sm text-slate-700 line-clamp-3">${p.pregunta}</p>
          <div class="mt-3 text-sm text-slate-600">Asignado a: <span class="font-medium">${p.asignado}</span></div>
          <div class="mt-4 flex items-center justify-between gap-3">
            <div class="flex items-center gap-2 text-xs ${p.estado==='asignado' ? 'text-amber-700' : 'text-emerald-700'}">
              <span class="w-2.5 h-2.5 rounded-full ${p.estado==='asignado' ? 'bg-amber-500' : 'bg-emerald-500'}"></span>
              <span class="uppercase tracking-wide">${p.estado}</span>
            </div>
            <button class="px-3 py-2 rounded-xl bg-emerald-600 text-white text-sm hover:bg-emerald-500" data-cod="${p.codigo}">Ver detalles</button>
          </div>
        `;
        grid.appendChild(card);
      });

      // Bind
      $$('#grid button[data-cod]').forEach(btn => btn.addEventListener('click', e => {
        const cod = e.currentTarget.getAttribute('data-cod');
        const p = PROBLEMAS.find(x => x.codigo === cod);
        openModal(p);
      }));
    }

    // ===== Modal =====
    function openModal(p){
      if (!p) return;
      $('#m-titulo').textContent = `${p.codigo} · ${p.linea}`;
      $('#m-body').innerHTML = `
        <div>
          <div class="text-[12px] uppercase tracking-wide text-slate-500">Tema</div>
          <div class="mt-1 p-3 rounded-xl bg-slate-100 text-slate-800">${p.tema}</div>
        </div>
        <div class="grid sm:grid-cols-2 gap-3">
          <div>
            <div class="text-[12px] uppercase tracking-wide text-slate-500">Área</div>
            <div class="mt-1 p-3 rounded-xl bg-slate-100">${p.area}</div>
          </div>
          <div>
            <div class="text-[12px] uppercase tracking-wide text-slate-500">Estado</div>
            <div class="mt-1 p-3 rounded-xl bg-slate-100">${p.estado}</div>
          </div>
        </div>
        <div>
          <div class="text-[12px] uppercase tracking-wide text-slate-500">Pregunta</div>
          <div class="mt-1 p-3 rounded-xl bg-slate-100">${p.pregunta}</div>
        </div>
        ${p.objetivo ? `
        <div>
          <div class="text-[12px] uppercase tracking-wide text-slate-500">Objetivo</div>
          <div class="mt-1 p-3 rounded-xl bg-slate-100">${p.objetivo}</div>
        </div>` : ''}
        <div>
          <div class="text-[12px] uppercase tracking-wide text-slate-500">Metodología</div>
          <div class="mt-2 flex flex-wrap gap-2">
            ${(p.metodologia||'').split('+').map(m => `<span class="chip bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200">${m.trim()}</span>`).join('')}
          </div>
        </div>
        <div class="text-sm text-slate-600">Asignado a: <span class="font-medium">${p.asignado}</span></div>
      `;

      const modal = $('#modal');
      const card = $('#modal-card');
      modal.classList.remove('hidden');
      requestAnimationFrame(() => card.classList.remove('modal-enter'));
    }

    function closeModal(){
      const modal = $('#modal');
      const card = $('#modal-card');
      card.classList.add('modal-enter');
      setTimeout(() => modal.classList.add('hidden'), 120);
    }

    $('#modal-overlay').addEventListener('click', closeModal);
    $('#m-close').addEventListener('click', closeModal);
    $('#m-ok').addEventListener('click', closeModal);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

    // ===== Eventos filtros =====
    buildFilters();

    $('#btn-aplicar').addEventListener('click', () => {
      state.area = $('#f-area').value || '';
      state.linea = $('#f-linea').value || '';
      state.estado = $('#f-estado').value || '';
      state.q = $('#f-q').value || '';
      applyFilters();
    });
    $('#btn-reset').addEventListener('click', () => {
      $('#f-area').value = '';
      $('#f-linea').value = '';
      $('#f-estado').value = '';
      $('#f-q').value = '';
      state.area = state.linea = state.estado = state.q = '';
      applyFilters();
    });
    $('#f-q').addEventListener('input', (e) => { state.q = e.target.value; applyFilters(); });

    // Render inicial
    applyFilters();
  </script>
</body>
</html>

