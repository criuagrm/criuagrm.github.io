<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Conferencias — CIRCPyCS UAGRM</title>
  <meta name="description" content="Conferencias magistrales del Centro de Investigación Regional en Ciencia Política y Ciencias Sociales — UAGRM." />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { brand:'#003366', bgbase:'#f5f7fb', borderc:'#e5e7eb' },
          fontFamily: {
            sans: ['Poppins','ui-sans-serif','system-ui','Segoe UI','Roboto','Helvetica Neue','Arial'],
            serif: ['Playfair Display','serif']
          },
          boxShadow: { soft: '0 8px 22px rgba(2,6,23,.08)' },
          borderRadius: { xl2: '18px' }
        }
      }
    }
  </script>
  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

  <style>
    :root{ --header-h: 96px; }
    .chip{display:inline-flex;align-items:center;gap:.4rem;padding:.25rem .6rem;border-radius:9999px;font-size:.72rem;line-height:1rem}
    .hero-bg:before{content:"";position:absolute;inset:-30%;background:radial-gradient(60% 60% at 20% 20%,rgba(16,185,129,.25),transparent 60%),radial-gradient(60% 60% at 80% 80%,rgba(244,63,94,.25),transparent 60%)}

    /* Posters verticales: usar aspect-ratio para que SIEMPRE encaje y no se solape */
    .poster-box{aspect-ratio:4/5;width:100%;max-width:100%;overflow:hidden}
    @media (min-width:640px){.poster-box{aspect-ratio:3/4}}
    @media (min-width:1024px){.poster-box{aspect-ratio:7/10}}
    .poster-img{height:100%;width:100%;object-fit:contain;display:block;padding:8px;margin:0 auto}

    /* Título en 2 líneas máx. */
    .title-2l{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    /* Descripción en 3 líneas máx. */
    .desc-3l{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}

    /* Anclajes compensados por el header */
    section[id]{ scroll-margin-top: var(--header-h, 96px); }
    @media (prefers-reduced-motion: reduce){ html{ scroll-behavior:auto; } }

    /* Botón hamburguesa -> X cuando está abierto */
    #btn-open[aria-expanded="true"] #icon-bars{ display:none; }
    #btn-open[aria-expanded="true"] #icon-x{ display:block; }

    /* Menú móvil: altura segura bajo el header */
    #mobile-menu{
      max-height: calc(100vh - var(--header-h));
      max-height: calc(100svh - var(--header-h));
      max-height: calc(100dvh - var(--header-h));
      overflow-y: auto; overscroll-behavior: contain; -webkit-overflow-scrolling: touch;
    }

    /* Botones de redes (solo icono, colores oficiales) */
    .social-btn{display:grid;place-items:center;width:34px;height:34px;border-radius:9999px;color:#fff;transition:transform .12s ease, box-shadow .12s ease}
    .social-btn:hover{transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.08)}
    .social-fb{background:#1877F2}
    .social-yt{background:#FF0000}
    .social-x{background:#000}
    .social-disabled{background:#e5e7eb; color:#94a3b8}
  </style>
</head>
<body class="min-h-screen bg-bgbase text-slate-800 font-sans">
  <!-- Cinta superior -->
  <div class="h-1 w-full bg-gradient-to-r from-emerald-600 via-sky-600 to-rose-600"></div>

  <!-- HEADER -->
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-between">
      <a href="#inicio" class="flex items-center gap-3">
        <img src="https://i.imgur.com/ldeXZmG.png" alt="Logo CIRCPyCS" class="h-9 w-9 object-contain" />
        <div class="leading-tight">
          <p class="text-xs tracking-wide text-slate-500">UAGRM</p>
          <h1 class="font-bold text-lg">CIRCPyCS</h1>
        </div>
      </a>
      <!-- Nav escritorio -->
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#agenda" class="hover:text-sky-700">En curso</a>
        <a href="#pasados" class="hover:text-sky-700">Pasadas</a>
        <a href="#contacto" class="hover:text-sky-700">Contacto</a>
        <a href="https://cir.uagrm.edu.bo/" class="px-3 py-1.5 rounded-lg border border-slate-300 hover:border-sky-600 hover:text-sky-700">Volver a Inicio</a>
      </nav>
      <!-- Botón móvil (dropdown sencillo) -->
      <button id="btn-open" class="md:hidden inline-flex items-center gap-2 px-3 py-2 rounded-xl border border-slate-200"
              aria-expanded="false" aria-controls="mobile-menu" aria-label="Abrir menú">
        <span>Menú</span>
        <svg id="icon-bars" width="20" height="20" viewBox="0 0 24 24" fill="none" class="block"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>
        <svg id="icon-x" width="20" height="20" viewBox="0 0 24 24" fill="none" class="hidden"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>
      </button>
    </div>
    <!-- Menú móvil dropdown -->
    <nav id="mobile-menu" class="md:hidden hidden border-t border-slate-200 bg-white shadow-[0_8px_22px_rgba(2,6,23,.08)]" aria-label="Navegación móvil" aria-hidden="true">
      <ul class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 grid gap-1 text-[15px]">
        <li><a class="block px-3 py-2 rounded-lg hover:bg-slate-50" href="#agenda">En curso</a></li>
        <li><a class="block px-3 py-2 rounded-lg hover:bg-slate-50" href="#pasados">Pasadas</a></li>
        <li><a class="block px-3 py-2 rounded-lg hover:bg-slate-50" href="#contacto">Contacto</a></li>
        <li class="pt-2 mt-2 border-t border-slate-200"><a class="block px-3 py-2 rounded-lg hover:bg-slate-50" href="https://cir.uagrm.edu.bo/">Volver a Inicio</a></li>
      </ul>
    </nav>
  </header>

  <!-- HERO -->
  <section id="inicio" class="relative hero-bg">
    <div class="absolute inset-0 -z-10 opacity-30"></div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 lg:py-12">
      <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200">Conferencias</span>
      <h2 class="mt-4 font-serif text-3xl sm:text-4xl font-bold text-brand">Conferencias Magistrales</h2>
      <p class="mt-2 max-w-3xl text-slate-600">Afiches en tamaño real, descripción y accesos a Facebook, YouTube y X. Todo adaptado a móvil.</p>
    </div>
  </section>

  <!-- BUSCADOR -->
  <section class="pb-4" id="filtros">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="rounded-2xl border border-borderc bg-white p-4 shadow-soft flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between">
        <div class="text-sm text-slate-600">Listado de conferencias</div>
        <div class="flex items-center gap-2 w-full lg:w-auto">
          <input id="search" type="search" placeholder="Buscar por título, tema o ponente…" class="w-full lg:w-96 rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200" />
          <button id="clear" class="px-3 py-2 rounded-xl border border-slate-300 text-sm">Limpiar</button>
        </div>
      </div>
    </div>
  </section>

  <!-- EN CURSO -->
  <main id="agenda" class="pb-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h3 class="text-xl font-serif font-bold text-brand">Conferencias en curso</h3>
      <div id="events-grid" class="mt-4 grid gap-6 sm:grid-cols-2 lg:grid-cols-3"></div>
    </div>
  </main>

  <!-- PASADAS -->
  <section id="pasados" class="py-10 bg-white border-y border-slate-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h3 class="text-xl font-serif font-bold text-brand">Conferencias pasadas</h3>
      <div id="past-grid" class="mt-4"></div>
    </div>
  </section>

  <!-- CONTACTO -->
  <section id="contacto" class="py-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid lg:grid-cols-2 gap-8 items-start">
      <div class="rounded-2xl border border-borderc bg-white p-6 shadow-soft">
        <h3 class="font-semibold text-lg">Contacto</h3>
        <p class="mt-2 text-sm text-slate-600">¿Deseas proponer una conferencia magistral?</p>
        <div class="mt-4 grid sm:grid-cols-2 gap-3 text-sm">
          <div class="rounded-xl border border-borderc p-3">
            <div class="text-slate-500">Email</div>
            <a href="mailto:cri.cspoliticas.fcjpsri@uagrm.edu.bo" class="font-medium text-sky-700">cri.cspoliticas.fcjpsri@uagrm.edu.bo</a>
          </div>
          <div class="rounded-xl border border-borderc p-3">
            <div class="text-slate-500">Teléfono</div>
            <div class="font-medium">+591 67381294</div>
          </div>
        </div>
      </div>
      <div class="rounded-2xl border border-borderc bg-white p-6 shadow-soft">
        <h3 class="font-semibold text-lg">Enviar propuesta</h3>
        <p class="mt-2 text-sm text-slate-600">Incluye título, resumen, ponente(s), fecha tentativa y requerimientos.</p>
        <a href="https://forms.gle/" target="_blank" class="inline-flex items-center gap-2 mt-3 px-4 py-2 rounded-xl bg-slate-900 text-white font-medium hover:bg-slate-800" rel="noopener">Formulario<span>→</span></a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="border-t border-slate-200 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-sm text-slate-600">
      <div class="grid place-items-center gap-3 text-center">
        <p>© <span id="year"></span> Centro de Investigación Regional en Ciencia Política y Ciencias Sociales UAGRM (CIRCPyCS). Todos los derechos reservados.</p>
        <p>Contacto: <a class="text-sky-700 hover:underline" href="mailto:cri.cspoliticas.fcjpsri@uagrm.edu.bo">cri.cspoliticas.fcjpsri@uagrm.edu.bo</a> · +591 67381294</p>
      </div>
    </div>
  </footer>

  <script>
    // Año dinámico
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Menú móvil dropdown =====
    const btnOpen = document.getElementById('btn-open');
    const mobileMenu = document.getElementById('mobile-menu');
    const headerEl = document.querySelector('header');

    function setHeaderVar(){
      const h = Math.round(headerEl.getBoundingClientRect().height || 64);
      document.documentElement.style.setProperty('--header-h', h + 'px');
      mobileMenu.style.setProperty('--header-h', h + 'px');
    }
    function toggleMenu(forceOpen = null){
      const willOpen = forceOpen !== null ? forceOpen : mobileMenu.classList.contains('hidden');
      if (willOpen) setHeaderVar();
      mobileMenu.classList.toggle('hidden', !willOpen);
      mobileMenu.setAttribute('aria-hidden', String(!willOpen));
      btnOpen.setAttribute('aria-expanded', String(willOpen));
      document.body.style.overflow = willOpen ? 'hidden' : '';
      if (willOpen) {
        setTimeout(()=> mobileMenu.querySelector('a')?.focus(), 0);
        document.addEventListener('pointerdown', onOutside);
      } else {
        document.removeEventListener('pointerdown', onOutside);
        btnOpen.focus();
      }
    }
    function onOutside(e){
      if (!mobileMenu.contains(e.target) && !btnOpen.contains(e.target)) toggleMenu(false);
    }

    btnOpen.addEventListener('click', ()=> toggleMenu());
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') toggleMenu(false); });
    mobileMenu.addEventListener('click', (e)=>{ if(e.target.closest('a')) toggleMenu(false); });
    window.addEventListener('resize', ()=>{ if(!mobileMenu.classList.contains('hidden')) setHeaderVar(); });
    window.matchMedia('(min-width:768px)').addEventListener('change', ev=>{ if(ev.matches) toggleMenu(false); });

    // ======== Datos de conferencias ========
    // Nota: Pasquino es 2024; el resto, 2025
    const EVENTS = [
      // 2025
      { id:'u_urbina',
        title:'El fracaso del liberalismo en explicar el desarrollo de los países',
        date:'2025-06-23', time:'18:30', mode:'Virtual',
        venue:'Transmisión en vivo — UAGRM',
        cover:'https://i.imgur.com/QdUViuY.png',
        desc:'Dante Urbina, doctor en Economía, autor y docente. Transmisión en vivo.',
        links:{ fb:'', yt:'', x:'' }
      },
      { id:'u_meta',
        title:'¡No es opinión, es evidencia! ¿Por qué los políticos deberían hablar de meta-análisis?',
        date:'2025-05-15', time:'19:00', mode:'Virtual',
        venue:'Transmisión en vivo — UAGRM',
        cover:'https://i.imgur.com/Z5qXo10.png',
        desc:'Ricardo Fernández, investigador principal y doctorando en la UPC. Cómo usar meta-análisis para mejores políticas públicas.',
        links:{ fb:'', yt:'', x:'' }
      },
      { id:'p_mokre',
        title:'¿Existe evidencia de la teoría del valor-trabajo de Marx?',
        date:'2025-07-12', time:'18:30', mode:'Virtual',
        venue:'Transmisión en vivo — UAGRM',
        cover:'https://i.imgur.com/ttOVFpH.png',
        desc:'Patrick Mokre, economista (The New School). Conferencia sobre teoría del valor-trabajo.',
        links:{ fb:'', yt:'', x:'' }
      },
      { id:'p_barrientos_presidencialismo',
        title:'Instituciones democráticas y poder ejecutivo: el presidencialismo en América Latina hoy',
        date:'2025-08-04', time:'18:30', mode:'Virtual',
        venue:'Transmisión en vivo — UAGRM',
        cover:'https://i.imgur.com/2nvqeWO.png',
        desc:'Conferencia magistral CIRCPyCS (#4) a cargo de Fernando Barrientos.',
        links:{ fb:'', yt:'', x:'' }
      },
      { id:'p_barrientos_regimen',
        title:'El desapercibido desplome del régimen democrático en Bolivia (2012–2019)',
        date:'2025-08-13', time:'18:30', mode:'Virtual',
        venue:'Transmisión en vivo — UAGRM',
        cover:'https://i.imgur.com/4ZerZG9.png',
        desc:'Conferencia magistral CIRCPyCS (#5) por Fernando Barrientos.',
        links:{ fb:'', yt:'', x:'' }
      },
      { id:'p_thomas',
        title:'La Política de la Microeconomía y los límites del liberalismo económico',
        date:'2025-08-28', time:'18:30', mode:'Virtual',
        venue:'Transmisión en vivo — UAGRM',
        cover:'https://i.imgur.com/9dBaFRH.png',
        desc:'Alex M. Thomas, economista. Charla con traducción automática al español.',
        links:{ fb:'', yt:'', x:'' }
      },
      // Nueva 2025 – Mar Montoya Lozano
      { id:'u_montoya',
        title:'¿Más desigualdad es menor democracia?',
        date:'2025-09-30', time:'13:00', mode:'Virtual',
        venue:'Transmisión en vivo — UAGRM',
        cover:'https://i.imgur.com/JCwxUXh.png',
        desc:'Conferencia de la Dra. Mar Montoya Lozano sobre cómo la percepción de la desigualdad impacta en la calidad democrática, actitudes sociopolíticas y cooperación',
        links:{ fb:'', yt:'', x:'' }
      },

      // 2024 (Pasada)
      { id:'p_pasquino',
        title:'Bobbio y Sartori: un viaje por la teoría política con el Dr. Gianfranco Pasquino',
        date:'2024-10-16', time:'11:30', mode:'Virtual/Presencial',
        venue:'Transmisión en vivo — UAGRM',
        cover:'https://i.imgur.com/0l9hdFW.png',
        desc:'Lección magistral con Gianfranco Pasquino sobre Norberto Bobbio y Giovanni Sartori.',
        links:{ fb:'', yt:'', x:'' }
      }
    ];

    // Iconos SVG (currentColor)
    const ICONS = {
      fb: '<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22 12.06C22 6.49 17.52 2 12 2S2 6.49 2 12.06c0 5.02 3.66 9.19 8.44 9.94v-7.03H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.91h-2.34V22c4.78-.75 8.44-4.92 8.44-9.94Z"/></svg>',
      yt: '<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M23.5 6.2a4.7 4.7 0 0 0-3.3-3.3C18.5 2.3 12 2.3 12 2.3s-6.5 0-8.2.6A4.7 4.7 0 0 0 .5 6.2 48.5 48.5 0 0 0 0 12a48.5 48.5 0 0 0 .5 5.8 4.7 4.7 0 0 0 3.3 3.3c1.7.6 8.2.6 8.2.6s6.5 0 8.2-.6a4.7 4.7 0 0 0 3.3-3.3A48.5 48.5 0 0 0 24 12a48.5 48.5 0 0 0-.5-5.8ZM9.6 15.5V8.5l6.4 3.5-6.4 3.5Z"/></svg>',
      x:  '<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M18.244 2H21l-6.42 7.36L22 22h-6.828l-4.77-6.22L4.883 22H2.126l6.9-7.92L2 2h6.953l4.29 5.64L18.244 2Zm-1.195 18h2.04L7.05 4h-2.1l12.1 16Z"/></svg>'
    };

    function fmtDate(iso){
      const d = new Date(iso + 'T00:00:00');
      return d.toLocaleDateString('es-BO', { year:'numeric', month:'short', day:'2-digit' });
    }

    function socialButtons(links){
      const list = [
        {href:links.fb, key:'fb', cls:'social-fb', label:'Facebook'},
        {href:links.yt, key:'yt', cls:'social-yt', label:'YouTube'},
        {href:links.x,  key:'x',  cls:'social-x',  label:'X (Twitter)'}
      ];
      return list.map(({href,key,cls,label})=>{
        if(!href) return `<span title="Sin enlace" class="social-btn social-disabled" aria-disabled="true">${ICONS[key]}</span>`;
        return `<a href="${href}" target="_blank" rel="noopener" class="social-btn ${cls}" aria-label="${label}">${ICONS[key]}</a>`;
      }).join('');
    }

    function cardHTML(ev){
      return `
        <article class="rounded-xl2 bg-white border border-borderc shadow-soft overflow-hidden flex flex-col">
          <div class="relative poster-box grid place-items-center bg-slate-50 border-b border-borderc p-2">
            <img loading="lazy" decoding="async" class="poster-img"
                 src="${ev.cover}" alt="Afiche: ${ev.title}"
                 onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1529070538774-1843cb3265df?q=80&w=1200&auto=format&fit=crop'"/>
            <div class="absolute top-2 left-2 space-x-1">
              <span class="chip bg-rose-50 text-rose-700 ring-1 ring-rose-200">Magistral</span>
            </div>
          </div>
          <div class="p-5 flex-1 flex flex-col">
            <h4 class="font-semibold text-brand title-2l">${ev.title}</h4>
            <p class="mt-1 text-sm text-slate-600 desc-3l">${ev.desc || ''}</p>
            <div class="mt-3 text-sm text-slate-700">
              <div><span class="font-medium">Fecha:</span> ${fmtDate(ev.date)} · ${ev.time} · ${ev.mode}</div>
              <div class="truncate"><span class="font-medium">Lugar:</span> ${ev.venue}</div>
            </div>
            <div class="mt-4 flex items-center gap-2">${socialButtons(ev.links)}</div>
          </div>
        </article>`;
    }

    function render(){
      const grid = document.getElementById('events-grid');
      const past = document.getElementById('past-grid');
      const q = document.getElementById('search').value.trim().toLowerCase();

      const now = new Date();
      const match = (ev)=> !q || (ev.title + (ev.desc||'') + (ev.venue||'')).toLowerCase().includes(q);
      const yearOf = (ev)=> new Date(ev.date + 'T00:00:00').getFullYear();

      // === Conferencias en curso: todas las de 2025 (próximas y realizadas) ===
      const in2025 = EVENTS.filter(e=> yearOf(e) === 2025 && match(e)).sort((a,b)=> b.date.localeCompare(a.date));
      grid.innerHTML = in2025.map(cardHTML).join('') || `<div class="text-slate-500 text-sm">No hay conferencias con estos filtros.</div>`;

      // === Conferencias pasadas: SOLO 2024 (Pasquino) con rótulo "2024" ===
      const passed2024 = EVENTS.filter(e=> yearOf(e) === 2024 && new Date(e.date+'T23:59:59') < now && match(e)).sort((a,b)=> b.date.localeCompare(a.date));
      if(passed2024.length){
        past.innerHTML = `
          <h4 class="text-base font-semibold text-slate-700">2024</h4>
          <div class="mt-3 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">${passed2024.map(cardHTML).join('')}</div>`;
      } else {
        past.innerHTML = `<div class="text-slate-500 text-sm">Aún no hay conferencias pasadas.</div>`;
      }
    }

    document.getElementById('search').addEventListener('input', render);
    document.getElementById('clear').addEventListener('click', ()=>{ document.getElementById('search').value=''; render(); });

    // Inicializa
    setHeaderVar(); render();

    // Checks mínimos
    console.assert(document.getElementById('events-grid'), 'Falta #events-grid');
    console.assert(document.getElementById('past-grid'), 'Falta #past-grid');
    console.assert(Array.isArray(EVENTS) && EVENTS.length >= 3, 'Se esperaban >=3 conferencias');
  </script>
</body>
</html>
