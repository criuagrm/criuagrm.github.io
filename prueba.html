<!DOCTYPE html>
<html lang="es">
<head>
    <base href="https://criuagrm.github.io/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIRCPyCS - Resultados Encuesta UAGRM 2025</title>

    <!-- Bootstrap 5, Font Awesome, Google Fonts -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <!-- Plugin para mostrar etiquetas de datos en Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    
    <style>
        :root {
            --primary-color: #333333;
            --secondary-color: #666666;
            --accent-color: #999999;
            --background-color: #f0f0f0;
            --text-color: #333333;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }
        .navbar, .footer {
            background-color: var(--primary-color);
            color: white;
        }
        .hero {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 4rem 0;
            text-align: center;
            margin-bottom: 2rem;
        }
        .section {
            padding: 3rem 0;
        }
        .chart-placeholder {
            height: 450px;
            background-color: #ffffff;
            border-radius: 5px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            padding: 1rem;
        }
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        /* Caja blanca para la ficha técnica */
        .card-ficha {
            background-color: #ffffff;
            border-radius: 6px;
            padding: 2rem;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        /* Centrado de textos sobre gráficas */
        .chart-title {
            text-align: center;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
    </style>
</head>
<body>

<!-- Navbar con menú desplegable -->
<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
        <a class="navbar-brand" href="#">CIRCPyCS</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
                aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav me-auto">
                <!-- Menú desplegable con las secciones -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Secciones
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="mostrarSeccion('seccion-general')">Características Generales</a></li>
                        <li><a class="dropdown-item" href="#" onclick="mostrarSeccion('seccion-problemas')">Problemas y Propuestas</a></li>
                        <li><a class="dropdown-item" href="#" onclick="mostrarSeccion('seccion-gestion')">Evaluación Gestión</a></li>
                        <li><a class="dropdown-item" href="#" onclick="mostrarSeccion('seccion-candidatos')">Percepción Candidatos</a></li>
                        <li><a class="dropdown-item" href="#" onclick="mostrarSeccion('seccion-voto')">Intención de Voto</a></li>
                    </ul>
                </li>
            </ul>
            <div class="d-flex">
                <a href="https://criuagrm.github.io/rectornov2024" class="btn btn-outline-light">Anterior Encuesta</a>
            </div>
        </div>
    </div>
</nav>

<!-- Sección Hero -->
<section class="hero">
    <div class="container">
        <h1>Resultados Encuesta UAGRM 2025</h1>
        <p>Análisis de percepción sobre preferencias para Rector y Vicerrector UAGRM 2025</p>
    </div>
</section>

<!-- Ficha Técnica dentro de caja blanca -->
<div class="container my-5">
    <div class="card-ficha">
        <h2 class="text-center mb-5">Ficha Técnica</h2>
        <ul>
            <li><strong>Metodología:</strong> Encuesta de percepción académica, institucional y política mediante formularios virtuales.</li>
            <li><strong>Características de la muestra:</strong> Muestreo no probabilístico y proporcional al tamaño de la población.</li>
            <li><strong>Aplicación de la Encuesta:</strong> Del 02 al 07 de marzo de 2025.</li>
            <li><strong>Universo poblacional:</strong> Docentes y estudiantes inscritos en la UAGRM, pertenecientes a las 18 facultades.</li>
            <li><strong>Tamaño de la muestra:</strong> 820 personas encuestadas (286 docentes y 534 estudiantes).</li>
            <li><strong>Distribución de la muestra:</strong> Sin diferenciación de género ni edad, incluyendo docentes regulares y estudiantes registrados.</li>
            <li><strong>Coeficiente de fiabilidad:</strong> 95%.</li>
            <li><strong>Error de muestreo:</strong> &plusmn;4.1%.</li>
            <li><strong>Institución ejecutora:</strong> Centro de Investigación Regional en Ciencia Política y Ciencias Sociales.</li>
        </ul>
    </div>
</div>

<!-- Secciones Principales -->
<div class="container section">
    <h2 class="text-center mb-5">Resultados Detallados</h2>

    <!-- SECCIÓN A: CARACTERÍSTICAS GENERALES -->
    <div id="seccion-general" class="contenido-seccion">
        <h3 class="chart-title">Características Generales de los Encuestados</h3>

        <h5 class="chart-title">Edad de los participantes</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-edad"></canvas>
        </div>

        <h5 class="chart-title">Facultad a la que pertenecen los encuestados</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-facultad"></canvas>
        </div>

        <h5 class="chart-title">Departamento de nacimiento</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-departamento"></canvas>
        </div>
    </div>

    <!-- SECCIÓN B: PROBLEMAS Y PROPUESTAS -->
    <div id="seccion-problemas" class="contenido-seccion d-none">
        <h3 class="chart-title">Problemas y Propuestas de mejora en la UAGRM</h3>

        <h5 class="chart-title">Principales problemas identificados</h5>
        <div class="chart-placeholder text-center">
            <p class="text-muted">[Aquí podrías colocar una imagen o texto estático con los problemas]</p>
        </div>

        <h5 class="chart-title">Propuestas más mencionadas</h5>
        <div class="chart-placeholder text-center">
            <p class="text-muted">[Aquí podrías colocar una imagen o texto estático con las propuestas]</p>
        </div>
    </div>

    <!-- SECCIÓN C: EVALUACIÓN DE LA GESTIÓN -->
    <div id="seccion-gestion" class="contenido-seccion d-none">
        <h3 class="chart-title">Evaluación de la Gestión Actual</h3>

        <h5 class="chart-title">Calificación general del Gobierno Universitario</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-gobierno-general"></canvas>
        </div>

        <h5 class="chart-title">Opinión sobre la gestión del Rector Vicente Cuéllar</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-rector-general"></canvas>
        </div>

        <h5 class="chart-title">Opinión sobre la gestión del Vicerrector Reinerio Vargas</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-vicerrector-general"></canvas>
        </div>
    </div>

    <!-- SECCIÓN D: PERCEPCIÓN SOBRE CANDIDATOS -->
    <div id="seccion-candidatos" class="contenido-seccion d-none">
        <h3 class="chart-title">Percepción sobre los candidatos al Claustro Universitario</h3>

        <h5 class="chart-title">Candidato que cree que ganará la elección a Rector</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-candidato-ganador"></canvas>
        </div>

        <h5 class="chart-title">Candidato preferido a Vicerrector</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-vicerrector-preferido"></canvas>
        </div>

        <h5 class="chart-title">Candidato a Rector por el que nunca votaría</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-candidato-rechazo"></canvas>
        </div>

        <h5 class="chart-title">Valoración de la candidatura del Vicerrector Reinerio Vargas</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-valoracion-vargas"></canvas>
        </div>

        <h5 class="chart-title">Aspectos valorados en gestión de Reinerio Vargas</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-aspectos-vargas"></canvas>
        </div>

        <h5 class="chart-title">¿Está de acuerdo con la reelección del Rector Vicente Cuéllar?</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-reeleccion-rector"></canvas>
        </div>
    </div>

    <!-- SECCIÓN E: INTENCIÓN DE VOTO -->
    <div id="seccion-voto" class="contenido-seccion d-none">
        <h3 class="chart-title">Intención de Voto para Rector y Vicerrector</h3>

        <h5 class="chart-title">Intención de voto actual para Rector</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-voto-rector"></canvas>
        </div>

        <h5 class="chart-title">Preferencia para acompañante (Vicerrector) de Reinerio Vargas</h5>
        <div class="chart-placeholder">
            <canvas id="grafica-voto-vicerrector"></canvas>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer text-center py-3">
    <div class="container">
        <p>&copy; 2025 Centro de Investigación Regional en Ciencia Política y Ciencias Sociales - UAGRM</p>
    </div>
</footer>

<!-- Scripts Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* Mostrar/ocultar secciones */
function mostrarSeccion(id) {
    document.querySelectorAll('.contenido-seccion').forEach((sec) => {
        sec.classList.add('d-none');
    });
    document.getElementById(id).classList.remove('d-none');
}

/* Mapa global de colores por nombre (personas, facultades, etc.) */
const colorMap = {
    // Personas
    "Reinerio Vargas": "#FFD700",   // Amarillo
    "Vicente Cuéllar": "#228B22",   // Verde
    "Juana Borja":     "#FF69B4",   // Rosa
    "Oscar Nogales":   "#6495ED",   // Azul claro
    "Orlando Pedraza": "#8A2BE2",   // Violeta
    "Alfonso Coca":    "#FFA500",   // Naranja
    "Osvaldo Ulloa":   "#A52A2A",   // Marrón
    "Rogelio Espinoza":"#009999",   // Verde azulado
    "Rolando López":   "#800000",   // Granate
    "Otros":           "#708090",   // Gris pizarra

    // Facultades (14 en total, cada una color distinto)
    "Facultad de Ciencias Jurídicas, Políticas y Sociales": "#003f5c",
    "Facultad de Ciencias Económicas y Empresariales": "#2f4b7c",
    "Facultad de Contaduría Pública": "#665191",
    "Facultad de Ciencias de la Salud": "#a05195",
    "Facultad Integral del Chaco": "#d45087",
    "Facultad de Bioquímica y Farmacia": "#f95d6a",
    "Facultad de Tecnología": "#ff7c43",
    "Facultad de Ciencias Agrícolas": "#ffa600",
    "Facultad Tecnológica": "#d36135",
    "Facultad de Informática y Redes": "#b71c1c",
    "Facultad de Humanidades": "#0d47a1",
    "Facultad de Ciencias del Hábitat": "#00695c",
    "Facultad Integral del Noreste": "#4a148c",
    "Facultad Politécnica": "#33691e",

    // Departamentos
    "Santa Cruz":  "#008000",
    "La Paz":      "#0000ff",
    "Sucre":       "#ff00ff",
    "Cochabamba":  "#ff0000",
    "Potosí":      "#00ffff",

    // Edades
    "18-26": "#b59ed9",
    "27-58": "#d69ed9",
    "59+":   "#af65aa"
};

/* Función para obtener los colores de cada etiqueta de un array de labels */
function getColors(labels) {
    return labels.map(label => colorMap[label] || "#999999");
}

/*
   Configuramos Chart.js para usar DataLabels (para mostrar etiquetas de datos en las barras).
   Anclamos las etiquetas al final de cada barra, mostrando el valor + '%'.
*/
Chart.register(ChartDataLabels);

/* 
   Función para crear un gráfico de barras horizontal con 
   - etiquetas de datos 
   - colores definidos en colorMap
*/
function crearGraficaBarras(idCanvas, labels, data, datasetLabel) {
    const ctx = document.getElementById(idCanvas).getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: datasetLabel,
                data: data,
                backgroundColor: getColors(labels),
                borderColor: '#333333',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            indexAxis: 'y',
            plugins: {
                legend: { display: false },
                datalabels: {
                    anchor: 'end',
                    align: 'end',
                    color: '#333333',
                    formatter: function(value) {
                        return value + '%';
                    }
                }
            },
            scales: {
                x: {
                    beginAtZero: true,
                    ticks: { stepSize: 10 }
                }
            }
        }
    });
}

/* Iniciamos la generación de todas las gráficas al cargar la página */
document.addEventListener('DOMContentLoaded', function() {

    // A) Sección CARACTERÍSTICAS GENERALES
    crearGraficaBarras(
        'grafica-edad',
        ['18-26', '27-58', '59+'],
        [57.1, 26.9, 16.0],
        'Edad de los Encuestados (%)'
    );
    crearGraficaBarras(
        'grafica-facultad',
        [
            "Facultad de Ciencias Jurídicas, Políticas y Sociales",
            "Facultad de Ciencias Económicas y Empresariales",
            "Facultad de Contaduría Pública",
            "Facultad de Ciencias de la Salud",
            "Facultad Integral del Chaco",
            "Facultad de Bioquímica y Farmacia",
            "Facultad de Tecnología",
            "Facultad de Ciencias Agrícolas",
            "Facultad Tecnológica",
            "Facultad de Informática y Redes",
            "Facultad de Humanidades",
            "Facultad de Ciencias del Hábitat",
            "Facultad Integral del Noreste",
            "Facultad Politécnica"
        ],
        [19.2, 19.2, 12.3, 8.5, 7.7, 6.9, 5.4, 4.6, 3.1, 2.3, 2.3, 2.3, 1.5, 0.8],
        'Facultades participantes (%)'
    );
    crearGraficaBarras(
        'grafica-departamento',
        ['Santa Cruz','La Paz','Sucre','Cochabamba','Potosí'],
        [83.0, 4.5, 3.2, 3.2, 2.2],
        'Departamento de Nacimiento (%)'
    );

    // C) Sección EVALUACIÓN DE LA GESTIÓN
    crearGraficaBarras(
        'grafica-gobierno-general',
        ['Regular', 'Bueno', 'Malo', 'Pésimo', 'Excelente'],
        [43.6, 26.3, 12.8, 12.2, 5.1],
        'Calificación Gobierno Universitario (%)'
    );
    crearGraficaBarras(
        'grafica-rector-general',
        ['Baja','Media','Nula','Muy baja','Muy alta'],
        [43.3,27.9,13.8,9.0,6.1],
        'Opinión sobre Rector Vicente Cuéllar (%)'
    );
    crearGraficaBarras(
        'grafica-vicerrector-general',
        ['Baja','Media','Muy alta','Nula','Muy baja'],
        [31.1,28.5,25.6,8.7,6.1],
        'Opinión sobre Vicerrector Vargas (%)'
    );

    // D) Sección PERCEPCIÓN CANDIDATOS
    crearGraficaBarras(
        'grafica-candidato-ganador',
        ['Reinerio Vargas','Vicente Cuéllar','Juana Borja','Oscar Nogales','Alfonso Coca','Orlando Pedraza','Otros'],
        [50.3,11.2,9.0,6.7,3.8,3.2,15.8],
        '¿Quién cree que ganará? (%)'
    );
    crearGraficaBarras(
        'grafica-vicerrector-preferido',
        ['Juana Borja','Orlando Pedraza','Oscar Nogales','Reinerio Vargas','Vicente Cuéllar','Otros'],
        [28.2,15.7,11.2,9.6,7.4,27.9],
        'Candidato preferido a Vicerrector (%)'
    );
    crearGraficaBarras(
        'grafica-candidato-rechazo',
        ['Vicente Cuéllar','Alfonso Coca','Osvaldo Ulloa','Oscar Nogales','Reinerio Vargas','Otros'],
        [17.9,17.6,15.4,8.5,9.6,31.0],
        'Candidato a Rector que NO votaría (%)'
    );
    crearGraficaBarras(
        'grafica-valoracion-vargas',
        ['Bien','Excelente','No acuerdo','Muy bien','Muy mal'],
        [32.1,29.8,17.0,15.1,6.1],
        'Valoración candidatura Vargas (%)'
    );
    crearGraficaBarras(
        'grafica-aspectos-vargas',
        ['Defensa democracia','Acreditación','Defensa región','Disminución carga','Declaratoria 0 cargas'],
        [33.3,22.1,21.2,11.9,11.5],
        'Aspectos valorados en Vargas (%)'
    );
    crearGraficaBarras(
        'grafica-reeleccion-rector',
        ['No','Sí'],
        [71.5,28.5],
        '¿De acuerdo con reelección Cuéllar? (%)'
    );

    // E) Sección INTENCIÓN DE VOTO
    crearGraficaBarras(
        'grafica-voto-rector',
        [
            'Reinerio Vargas','Juana Borja','Oscar Nogales','Vicente Cuéllar',
            'Osvaldo Ulloa','Alfonso Coca','Rogelio Espinoza','Orlando Pedraza',
            'Rolando López','Otros'
        ],
        [51.9,10.3,7.7,7.1,3.2,3.8,2.2,1.9,1.9,10.0],
        'Intención de voto a Rector (%)'
    );
    crearGraficaBarras(
        'grafica-voto-vicerrector',
        ['Juana Borja','Orlando Pedraza','Oscar Nogales','Vicente Cuéllar','Rolando López','Otros'],
        [28.2,15.7,11.2,7.4,4.2,33.3],
        'Preferencia acompañante (Vicerrector) (%)'
    );
});
</script>

</body>
</html>

